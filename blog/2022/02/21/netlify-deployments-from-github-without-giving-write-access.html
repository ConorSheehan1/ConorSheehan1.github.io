<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- rss auto-discovery https://www.rssboard.org/rss-autodiscovery -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://conorsheehan1.github.io/feed.xml">

    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Netlify Deployments From Github Without Giving Write Access | Conor Sheehan</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Netlify Deployments From Github Without Giving Write Access" />
<meta name="author" content="ConorSheehan1" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Netlify is a great hosting service, but there’s one thing that bothers me about it. The default deployment path involves giving the service read and write access to all of your public and private repositories on GitHub :scream:" />
<meta property="og:description" content="Netlify is a great hosting service, but there’s one thing that bothers me about it. The default deployment path involves giving the service read and write access to all of your public and private repositories on GitHub :scream:" />
<link rel="canonical" href="https://conorsheehan1.github.io/blog/2022/02/21/netlify-deployments-from-github-without-giving-write-access.html" />
<meta property="og:url" content="https://conorsheehan1.github.io/blog/2022/02/21/netlify-deployments-from-github-without-giving-write-access.html" />
<meta property="og:site_name" content="Conor Sheehan" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-02-21T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Netlify Deployments From Github Without Giving Write Access" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"ConorSheehan1"},"dateModified":"2022-02-21T00:00:00+00:00","datePublished":"2022-02-21T00:00:00+00:00","description":"Netlify is a great hosting service, but there’s one thing that bothers me about it. The default deployment path involves giving the service read and write access to all of your public and private repositories on GitHub :scream:","headline":"Netlify Deployments From Github Without Giving Write Access","mainEntityOfPage":{"@type":"WebPage","@id":"https://conorsheehan1.github.io/blog/2022/02/21/netlify-deployments-from-github-without-giving-write-access.html"},"url":"https://conorsheehan1.github.io/blog/2022/02/21/netlify-deployments-from-github-without-giving-write-access.html"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="https://conorsheehan1.github.io/assets/dist/jstree/themes/default/style.min.css" />
    <link rel="stylesheet" href="https://conorsheehan1.github.io/assets/dist/jstree/themes/default-dark/style.min.css" />
    <link href="https://conorsheehan1.github.io/assets/dist/lightbox/css/lightbox.min.css" rel="stylesheet">
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTnHg4CGR2D7kSs0v4LLanw2qksYuRlEzO+tcaEPQogQ0KaoGN26/zrn20ImR1DfuLWnOo7aBA==" crossorigin="anonymous" referrerpolicy="no-referrer" /> -->

    <link rel="stylesheet" href="https://conorsheehan1.github.io/assets/dist/fontawesome/css/all.min.css" />
    <link rel="stylesheet" href="https://conorsheehan1.github.io/assets/css/style.css?v=">
    <link rel="shortcut icon" type="image/x-ico" href="https://conorsheehan1.github.io/assets/images/icons/favicon.ico" >

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>
    <script src="https://conorsheehan1.github.io/assets/dist/lightbox/js/lightbox.min.js"></script>
    <!-- order matters here. e.g. jstree depends on theme being loaded to provied getSavedTheme -->
    <script src="https://conorsheehan1.github.io/assets/js/theme.js"></script>
    <script src="https://conorsheehan1.github.io/assets/js/lightbox_custom.js"></script>
    <script src="https://conorsheehan1.github.io/assets/js/jstree_custom.js"></script>

  </head>
  <body>
    <div class="wrapper">
      <header id="header">
  <div class="container">
      <div class="col">
        <a href="https://github.com/ConorSheehan1">
          <div class="header-icon">
            <img src="https://conorsheehan1.github.io/assets/images/icons/github.svg" alt="github" />
          </div>
          <span>GitHub</span>
        </a>
      </div>

      <div class="col">
        <a href="https://www.linkedin.com/in/conor-s-403358106">
          <div class="header-icon">
            <img src="https://conorsheehan1.github.io/assets/images/icons/linkedin.svg" alt="linkedin" />
          </div>
          <span>Linked In</span>
        </a>
      </div>

      <div class="col">
        <a href="https://stackoverflow.com/users/6305204/con?tab=profile">
          <div class="header-icon">
            <img src="https://conorsheehan1.github.io/assets/images/icons/stackoverflow.svg" alt="stackoverflow" />
          </div>
          <span>Stack Overflow</span>
        </a>
      </div>

      <div class="col" id="theme-toggle-container">
        <div id="theme-toggle-background">
          <a id="theme-toggle" title="Switch Theme">
            <i class="fa-solid fa-adjust icon-size" aria-hidden="true" size="32px"></i>
          </a>
        </div>
      </div>
  </div>
  <div class="container-sm">
    <div class="header-center">
  <input id="projects-search-input" type="text" class="form-control header-left" placeholder="Search projects ..">
  <div id="projects-tree" class="header-right">
    <ul>
      <li data-jstree='{ "opened" : false }'>
        <a class='clickable-tree-node' href="/projects">Projects</a>
        <ul>
          
          
            
            
            <li>
              <a class='clickable-tree-node' href="https://conorsheehan1.github.io/categories#blog">
                Blog
              </a>
              <ul>
                
                
                  <li><a class='clickable-tree-node' href="/blog/2024/03/07/leaving-netlify-free-tier.html">Leaving Netlify Free Tier</a></li>
                
                  <li><a class='clickable-tree-node' href="/blog/2023/07/01/archiving-youtube-timestamp-reddit-bot.html">Archiving Youtube Timestamp Reddit Bot</a></li>
                
                  <li><a class='clickable-tree-node' href="/blog/2022/08/04/buying-and-configuring-my-first-domain.html">Buying And Configuring My First Domain</a></li>
                
                  <li><a class='clickable-tree-node' href="/blog/2022/04/18/reverse-engineering-uhabits-datamodel.html">Reverse Engineering Uhabits Datamodel</a></li>
                
                  <li><a class='clickable-tree-node' href="/blog/2022/03/31/stackoverflow-dev-story-sunset.html">Stackoverflow Dev Story Sunset</a></li>
                
                  <li><a class='clickable-tree-node' href="/blog/2022/02/21/netlify-deployments-from-github-without-giving-write-access.html">Netlify Deployments From Github Without Giving Write Access</a></li>
                
                  <li><a class='clickable-tree-node' href="/blog/2022/01/25/add-bootstrap-vue-to-vuepress.html">Add Bootstrap Vue To Vuepress</a></li>
                
                  <li><a class='clickable-tree-node' href="/blog/2022/01/07/3-patterns-for-cookiecutter-templates.html">3 Patterns For Cookiecutter Templates</a></li>
                
                  <li><a class='clickable-tree-node' href="/blog/2022/01/06/dev.to.html">Dev.to</a></li>
                
              </ul>
            </li>
          
            
            
            <li>
              <a class='clickable-tree-node' href="https://conorsheehan1.github.io/categories#college">
                College
              </a>
              <ul>
                
                
                  <li><a class='clickable-tree-node' href="/college/2016/08/31/dublin-bikes.html">Dublin Bikes</a></li>
                
                  <li><a class='clickable-tree-node' href="/college/2016/07/21/restimator.html">Restimator</a></li>
                
              </ul>
            </li>
          
            
            
            <li>
              <a class='clickable-tree-node' href="https://conorsheehan1.github.io/categories#open_source">
                Open source
              </a>
              <ul>
                
                
                  <li><a class='clickable-tree-node' href="/open_source/2018/05/28/vufind.html">Vufind</a></li>
                
              </ul>
            </li>
          
            
            
            <li>
              <a class='clickable-tree-node' href="https://conorsheehan1.github.io/categories#personal">
                Personal
              </a>
              <ul>
                
                
                  <li><a class='clickable-tree-node' href="/personal/2022/09/08/jekyll-plugins-on-github-pages.html">Jekyll Plugins On Github Pages</a></li>
                
                  <li><a class='clickable-tree-node' href="/personal/2021/09/16/youtube-timestamp-reddit-bot.html">Youtube Timestamp Reddit Bot</a></li>
                
                  <li><a class='clickable-tree-node' href="/personal/2020/12/03/shot.html">Shot</a></li>
                
                  <li><a class='clickable-tree-node' href="/personal/2020/09/21/osxdocker.html">Osxdocker</a></li>
                
                  <li><a class='clickable-tree-node' href="/personal/2018/01/27/chrome-compare.html">Chrome Compare</a></li>
                
              </ul>
            </li>
          
        </ul>
      </li>
    </ul>
  </div>
</div>

  </div>
</header>

      <section>
        <div id="title">
          <h1><a href="/">Conor Sheehan</a></h1>
          <hr>
        </div>
        <h1>Netlify Deployments From Github Without Giving Write Access
  <span class="back-to-projects">
    <a href="https://conorsheehan1.github.io/projects">&larr; Back to projects</a>
  </span>
</h1>
<div>
  <div class='category-badge'>
    Categories:
    <span class="badge">
      
        
        <span class="badge">
          <a href="https://conorsheehan1.github.io/categories#blog">blog</a>
        </span>
      
    </span>
  </div>
  
  <div class='tag-badge'>Tags:
    
      
      <span class="badge">
        <a href="https://conorsheehan1.github.io/tag/devto">devto</a>
      </span>
    
  </div>
  
</div>
<hr></hr>


<ul>
  <li id='live-site-link'><a href="https://dev.to/conorsheehan1/netlify-deployments-from-github-without-giving-write-access-m3f">View on dev.to</a></li>
</ul>


<p><a href="https://www.netlify.com/">Netlify</a> is a great hosting service, but there’s one thing that bothers me about it. The default deployment path involves giving the service <strong>read <em>and</em> write access</strong> to all of your <strong>public <em>and</em> private repositories</strong> on GitHub :scream:</p>

<p><a href="https://docs.netlify.com/site-deploys/create-deploys/#deploy-with-git">https://docs.netlify.com/site-deploys/create-deploys/#deploy-with-git</a></p>

<p>They skip over the authorization step in the video on their docs, but here’s what it looks like.</p>

<p><img src="https://dev-to-uploads.s3.amazonaws.com/uploads/articles/10y0xw8dha08edpfn6hy.png" alt="Netlify OAuth" /></p>

<p>I found <a href="https://answers.netlify.com/t/why-do-you-need-write-permissions-to-my-repository/7897">some</a> <a href="https://answers.netlify.com/t/new-github-permissions/37939">questions</a> on their forums asking about this. There’s even an open <a href="https://github.com/netlify/netlify-cms/issues/4329">issue</a> on their GitHub about it. Despite all the links I visited, I didn’t find a clear way to automate deploys to Netlify without giving them full access to my GitHub, so here’s how I managed to do it.</p>

<h2 id="initial-drag-and-drop-deploy">Initial drag and drop deploy</h2>
<p>Before we can automate our deploys, we need a site ID. Netlify provides a drag and drop feature, so we can drag the output of a build, or even a folder with an empty <code class="language-plaintext highlighter-rouge">index.html</code> to create a new site. <a href="https://app.netlify.com/drop">https://app.netlify.com/drop</a></p>

<h2 id="github-action">GitHub action</h2>
<p>Now that we have a Netlify site created, we can automate deploys to it. I used <a href="https://github.com/jsmrcaga/action-netlify-deploy">https://github.com/jsmrcaga/action-netlify-deploy</a>, which requires an auth token and a site ID.</p>

<h3 id="generate-auth-token">Generate auth token</h3>
<p>We can generate a Netlify auth token by going to <a href="https://app.netlify.com/user/applications#personal-access-tokens">https://app.netlify.com/user/applications#personal-access-tokens</a>. Click <code class="language-plaintext highlighter-rouge">New Access Token</code>, then give it a description and click <code class="language-plaintext highlighter-rouge">generate</code>. Copy the value, it won’t be displayed again.</p>

<p>To make the value accessible to the GitHub action, go to your GitHub repository and click <code class="language-plaintext highlighter-rouge">settings</code> -&gt; <code class="language-plaintext highlighter-rouge">secrets</code> -&gt; <code class="language-plaintext highlighter-rouge">new repository secret</code>. I named mine <code class="language-plaintext highlighter-rouge">NETLIFY_AUTH_TOKEN</code> and pasted in the value I copied from Netlify.</p>

<h3 id="get-site-id">Get site ID</h3>
<p>You can find your Netlify site ID by going to your Netlify site overview and clicking <code class="language-plaintext highlighter-rouge">site settings</code> and copying the <code class="language-plaintext highlighter-rouge">APP ID</code>. Again, to make it accessible to the GitHub action, click <code class="language-plaintext highlighter-rouge">settings</code> -&gt; <code class="language-plaintext highlighter-rouge">secrets</code> -&gt; <code class="language-plaintext highlighter-rouge">new repository secret</code>. I named mine <code class="language-plaintext highlighter-rouge">NETLIFY_SITE_ID</code> and pasted in the value I copied from Netlify.</p>

<h3 id="github-action-1">GitHub action</h3>
<p>Now that we have our secrets set up, we can create our GitHub action. Mine looks something like <a href="https://github.com/ConorSheehan1/conors-cocktails/blob/master/.github/workflows/deploy.yml">this</a>:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># .github/workflows/deploy.yml</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">deploy</span>

<span class="na">on</span><span class="pi">:</span>
  <span class="c1"># enable manual deploys</span>
  <span class="c1"># https://github.blog/changelog/2020-07-06-github-actions-manual-triggers-with-workflow_dispatch/</span>
  <span class="na">workflow_dispatch</span><span class="pi">:</span>
  <span class="c1"># deploy tags and commits to master automatically</span>
  <span class="na">push</span><span class="pi">:</span>
    <span class="na">tags</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">*"</span>
    <span class="na">branches</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">master"</span>

<span class="na">jobs</span><span class="pi">:</span>
  <span class="na">deploy</span><span class="pi">:</span>
    <span class="na">runs-on</span><span class="pi">:</span> <span class="s">ubuntu-latest</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Deploy</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">Netlify"</span>
    <span class="na">steps</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">actions/checkout@v2</span>
      <span class="pi">-</span> <span class="na">uses</span><span class="pi">:</span> <span class="s">jsmrcaga/action-netlify-deploy@v1.7.2</span>
        <span class="na">with</span><span class="pi">:</span>
          <span class="c1"># pass secrets in to the action</span>
          <span class="na">NETLIFY_SITE_ID</span><span class="pi">:</span> <span class="s">$</span>
          <span class="na">NETLIFY_AUTH_TOKEN</span><span class="pi">:</span> <span class="s">$</span>
          <span class="c1"># add the GitHub ref to the deploy message so we can trace back what version is deployed from the Netlify side</span>
          <span class="na">NETLIFY_DEPLOY_MESSAGE</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Prod</span><span class="nv"> </span><span class="s">deploy</span><span class="nv"> </span><span class="s">v$"</span>
          <span class="na">NETLIFY_DEPLOY_TO_PROD</span><span class="pi">:</span> <span class="no">true</span>
          <span class="c1"># this bit should be custom to your project. I'm deploying a vuepress project that uses yarn, so these are my settings.</span>
          <span class="na">install_command</span><span class="pi">:</span> <span class="s">yarn install</span>
          <span class="na">build_command</span><span class="pi">:</span> <span class="s">yarn build</span>
          <span class="na">build_directory</span><span class="pi">:</span> <span class="s">src/.vuepress/dist</span>
          <span class="na">node_version</span><span class="pi">:</span> <span class="s">14.18.2</span>
</code></pre></div></div>

<p>That’s it! Now you can deploy to Netlify automatically from your GitHub repo, and you haven’t given up any access rights.</p>

<h2 id="example-site">Example site</h2>
<p>I figured this out while building this project <a href="https://github.com/ConorSheehan1/conors-cocktails">https://github.com/ConorSheehan1/conors-cocktails</a> which is deployed here <a href="https://conorscocktails.netlify.app">https://conorscocktails.netlify.app</a> if you’re interested.</p>


      </section>
    </div>
    <footer id="footer">
  <div class="container">
    
    <div id="credit-footer">
      <a href="https://conorsheehan1.github.io/credits"> Credits </a>
    </div>
    <div id="rss-footer">
      <a href="https://conorsheehan1.github.io/feed.xml">
        <i class="fa-solid fa-rss" aria-hidden="true"></i>
      </a>
    </div>
  </div>
</footer>

    <script src="https://conorsheehan1.github.io/assets/dist/jstree/jstree.min.js"></script>
  </body>
</html>
