!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Stimulus={})}(this,(function(e){"use strict";var t=(n.prototype.connect=function(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)},n.prototype.disconnect=function(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)},n.prototype.bindingConnected=function(e){this.unorderedBindings.add(e)},n.prototype.bindingDisconnected=function(e){this.unorderedBindings.delete(e)},n.prototype.handleEvent=function(e){for(var t=function(e){if("immediatePropagationStopped"in e)return e;var t=e.stopImmediatePropagation;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,t.call(this)}})}(e),n=0,r=this.bindings;n<r.length;n++){var o=r[n];if(t.immediatePropagationStopped)break;o.handleEvent(t)}},Object.defineProperty(n.prototype,"bindings",{get:function(){return Array.from(this.unorderedBindings).sort((function(e,t){return(e=e.index)<(t=t.index)?-1:t<e?1:0}))},enumerable:!1,configurable:!0}),n);function n(e,t,n){this.eventTarget=e,this.eventName=t,this.eventOptions=n,this.unorderedBindings=new Set}var r=(o.prototype.start=function(){this.started||(this.started=!0,this.eventListeners.forEach((function(e){return e.connect()})))},o.prototype.stop=function(){this.started&&(this.started=!1,this.eventListeners.forEach((function(e){return e.disconnect()})))},Object.defineProperty(o.prototype,"eventListeners",{get:function(){return Array.from(this.eventListenerMaps.values()).reduce((function(e,t){return e.concat(Array.from(t.values()))}),[])},enumerable:!1,configurable:!0}),o.prototype.bindingConnected=function(e){this.fetchEventListenerForBinding(e).bindingConnected(e)},o.prototype.bindingDisconnected=function(e){this.fetchEventListenerForBinding(e).bindingDisconnected(e)},o.prototype.handleError=function(e,t,n){this.application.handleError(e,"Error "+t,n=void 0===n?{}:n)},o.prototype.fetchEventListenerForBinding=function(e){var t=e.eventTarget,n=e.eventName;e=e.eventOptions;return this.fetchEventListener(t,n,e)},o.prototype.fetchEventListener=function(e,t,n){var r=this.fetchEventListenerMapForEventTarget(e),o=this.cacheKey(t,n),i=r.get(o);return i||(i=this.createEventListener(e,t,n),r.set(o,i)),i},o.prototype.createEventListener=function(e,n,r){return r=new t(e,n,r),this.started&&r.connect(),r},o.prototype.fetchEventListenerMapForEventTarget=function(e){var t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t},o.prototype.cacheKey=function(e,t){var n=[e];return Object.keys(t).sort().forEach((function(e){n.push((t[e]?"":"!")+e)})),n.join(":")},o);function o(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}var i=/^((.+?)(@(window|document))?->)?(.+?)(#([^:]+?))(:(.+))?$/;var s=(a.forToken=function(e){return new this(e.element,e.index,function(e){return{eventTarget:function(e){return"window"==e?window:"document"==e?document:void 0}((e=e.trim().match(i)||[])[4]),eventName:e[2],eventOptions:e[9]?e[9].split(":").reduce((function(e,t){return Object.assign(e,((e={})[t.replace(/^!/,"")]=!/^!/.test(t),e))}),{}):{},identifier:e[5],methodName:e[7]}}(e.content))},a.prototype.toString=function(){var e=this.eventTargetName?"@"+this.eventTargetName:"";return this.eventName+e+"->"+this.identifier+"#"+this.methodName},Object.defineProperty(a.prototype,"eventTargetName",{get:function(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e},enumerable:!1,configurable:!0}),a);function a(e,t,n){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||function(e){var t=e.tagName.toLowerCase();if(t in c)return c[t](e)}(e)||l("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||l("missing identifier"),this.methodName=n.methodName||l("missing method name")}var c={a:function(e){return"click"},button:function(e){return"click"},form:function(e){return"submit"},input:function(e){return"submit"==e.getAttribute("type")?"click":"input"},select:function(e){return"change"},textarea:function(e){return"input"}};function l(e){throw new Error(e)}var u=(Object.defineProperty(p.prototype,"index",{get:function(){return this.action.index},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"eventTarget",{get:function(){return this.action.eventTarget},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"eventOptions",{get:function(){return this.action.eventOptions},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!1,configurable:!0}),p.prototype.handleEvent=function(e){this.willBeInvokedByEvent(e)&&this.invokeWithEvent(e)},Object.defineProperty(p.prototype,"eventName",{get:function(){return this.action.eventName},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"method",{get:function(){var e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error('Action "'+this.action+'" references undefined method "'+this.methodName+'"')},enumerable:!1,configurable:!0}),p.prototype.invokeWithEvent=function(e){try{this.method.call(this.controller,e)}catch(i){var t=this.identifier,n=this.controller,r=this.element,o=this.index;this.context.handleError(i,'invoking action "'+this.action+'"',{identifier:t,controller:n,element:r,index:o,event:e})}},p.prototype.willBeInvokedByEvent=function(e){return e=e.target,this.element===e||(e instanceof Element&&this.element.contains(e)?this.scope.containsElement(e):this.scope.containsElement(this.action.element))},Object.defineProperty(p.prototype,"controller",{get:function(){return this.context.controller},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"methodName",{get:function(){return this.action.methodName},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"scope",{get:function(){return this.context.scope},enumerable:!1,configurable:!0}),p);function p(e,t){this.context=e,this.action=t}var d=(f.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.refresh())},f.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},f.prototype.refresh=function(){if(this.started){for(var e=new Set(this.matchElementsInTree()),t=0,n=Array.from(this.elements);t<n.length;t++){var r=n[t];e.has(r)||this.removeElement(r)}for(var o=0,i=Array.from(e);o<i.length;o++)r=i[o],this.addElement(r)}},f.prototype.processMutations=function(e){if(this.started)for(var t=0,n=e;t<n.length;t++){var r=n[t];this.processMutation(r)}},f.prototype.processMutation=function(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))},f.prototype.processAttributeChange=function(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)},f.prototype.processRemovedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t];(r=this.elementFromNode(r))&&this.processTree(r,this.removeElement)}},f.prototype.processAddedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t];(r=this.elementFromNode(r))&&this.elementIsActive(r)&&this.processTree(r,this.addElement)}},f.prototype.matchElement=function(e){return this.delegate.matchElement(e)},f.prototype.matchElementsInTree=function(e){return void 0===e&&(e=this.element),this.delegate.matchElementsInTree(e)},f.prototype.processTree=function(e,t){for(var n=0,r=this.matchElementsInTree(e);n<r.length;n++){var o=r[n];t.call(this,o)}},f.prototype.elementFromNode=function(e){if(e.nodeType==Node.ELEMENT_NODE)return e},f.prototype.elementIsActive=function(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)},f.prototype.addElement=function(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))},f.prototype.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))},f);function f(e,t){var n=this;this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver((function(e){return n.processMutations(e)}))}var h=(Object.defineProperty(m.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!1,configurable:!0}),m.prototype.start=function(){this.elementObserver.start()},m.prototype.stop=function(){this.elementObserver.stop()},m.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(m.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!1,configurable:!0}),m.prototype.matchElement=function(e){return e.hasAttribute(this.attributeName)},m.prototype.matchElementsInTree=function(e){var t=this.matchElement(e)?[e]:[];e=Array.from(e.querySelectorAll(this.selector));return t.concat(e)},m.prototype.elementMatched=function(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)},m.prototype.elementUnmatched=function(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)},m.prototype.elementAttributeChanged=function(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)},m);function m(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new d(e,this)}var y=(g.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0}),this.refresh())},g.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},g.prototype.refresh=function(){if(this.started)for(var e=0,t=this.knownAttributeNames;e<t.length;e++){var n=t[e];this.refreshAttribute(n)}},g.prototype.processMutations=function(e){if(this.started)for(var t=0,n=e;t<n.length;t++){var r=n[t];this.processMutation(r)}},g.prototype.processMutation=function(e){(e=e.attributeName)&&this.refreshAttribute(e)},g.prototype.refreshAttribute=function(e){var t,n=this.delegate.getStringMapKeyForAttribute(e);null!=n&&(this.stringMap.has(e)||this.stringMapKeyAdded(n,e),t=this.element.getAttribute(e),this.stringMap.get(e)!=t&&this.stringMapValueChanged(t,n),null==t?(this.stringMap.delete(e),this.stringMapKeyRemoved(n,e)):this.stringMap.set(e,t))},g.prototype.stringMapKeyAdded=function(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)},g.prototype.stringMapValueChanged=function(e,t){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t)},g.prototype.stringMapKeyRemoved=function(e,t){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t)},Object.defineProperty(g.prototype,"knownAttributeNames",{get:function(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"currentAttributeNames",{get:function(){return Array.from(this.element.attributes).map((function(e){return e.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"recordedAttributeNames",{get:function(){return Array.from(this.stringMap.keys())},enumerable:!1,configurable:!0}),g);function g(e,t){var n=this;this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver((function(e){return n.processMutations(e)}))}function b(e,t,n){w(e,t).add(n)}function v(e,t,n){w(e,t).delete(n),n=t,null!=(e=(t=e).get(n))&&0==e.size&&t.delete(n)}function w(e,t){var n=e.get(t);return n||(n=new Set,e.set(t,n)),n}var E,O,A=(Object.defineProperty(x.prototype,"values",{get:function(){return Array.from(this.valuesByKey.values()).reduce((function(e,t){return e.concat(Array.from(t))}),[])},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"size",{get:function(){return Array.from(this.valuesByKey.values()).reduce((function(e,t){return e+t.size}),0)},enumerable:!1,configurable:!0}),x.prototype.add=function(e,t){b(this.valuesByKey,e,t)},x.prototype.delete=function(e,t){v(this.valuesByKey,e,t)},x.prototype.has=function(e,t){return null!=(e=this.valuesByKey.get(e))&&e.has(t)},x.prototype.hasKey=function(e){return this.valuesByKey.has(e)},x.prototype.hasValue=function(e){return Array.from(this.valuesByKey.values()).some((function(t){return t.has(e)}))},x.prototype.getValuesForKey=function(e){return(e=this.valuesByKey.get(e))?Array.from(e):[]},x.prototype.getKeysForValue=function(e){return Array.from(this.valuesByKey).filter((function(t){return t[0],t[1].has(e)})).map((function(e){var t=e[0];return e[1],t}))},x);function x(){this.valuesByKey=new Map}function _(){var e=O.call(this)||this;return e.keysByValue=new Map,e}(window&&window.__extends||(E=function(e,t){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}E(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(_,O=A),Object.defineProperty(_.prototype,"values",{get:function(){return Array.from(this.keysByValue.keys())},enumerable:!1,configurable:!0}),_.prototype.add=function(e,t){O.prototype.add.call(this,e,t),b(this.keysByValue,t,e)},_.prototype.delete=function(e,t){O.prototype.delete.call(this,e,t),v(this.keysByValue,t,e)},_.prototype.hasValue=function(e){return this.keysByValue.has(e)},_.prototype.getKeysForValue=function(e){return(e=this.keysByValue.get(e))?Array.from(e):[]};var k=(Object.defineProperty(T.prototype,"started",{get:function(){return this.attributeObserver.started},enumerable:!1,configurable:!0}),T.prototype.start=function(){this.attributeObserver.start()},T.prototype.stop=function(){this.attributeObserver.stop()},T.prototype.refresh=function(){this.attributeObserver.refresh()},Object.defineProperty(T.prototype,"element",{get:function(){return this.attributeObserver.element},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"attributeName",{get:function(){return this.attributeObserver.attributeName},enumerable:!1,configurable:!0}),T.prototype.elementMatchedAttribute=function(e){this.tokensMatched(this.readTokensForElement(e))},T.prototype.elementAttributeValueChanged=function(e){e=(t=this.refreshTokensForElement(e))[0];var t=t[1];this.tokensUnmatched(e),this.tokensMatched(t)},T.prototype.elementUnmatchedAttribute=function(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))},T.prototype.tokensMatched=function(e){var t=this;e.forEach((function(e){return t.tokenMatched(e)}))},T.prototype.tokensUnmatched=function(e){var t=this;e.forEach((function(e){return t.tokenUnmatched(e)}))},T.prototype.tokenMatched=function(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)},T.prototype.tokenUnmatched=function(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)},T.prototype.refreshTokensForElement=function(e){var t,n,r=this.tokensByElement.getValuesForKey(e),o=this.readTokensForElement(e);t=r,n=o,e=Math.max(t.length,n.length),e=Array.from({length:e},(function(e,r){return[t[r],n[r]]})).findIndex((function(e){var t=e[0];return e=e=e[1],!((t=t)&&e&&t.index==e.index&&t.content==e.content)}));return-1==e?[[],[]]:[r.slice(e),o.slice(e)]},T.prototype.readTokensForElement=function(e){var t,n,r=this.attributeName,o=e.getAttribute(r)||"";return t=e,n=r,o.trim().split(/\s+/).filter((function(e){return e.length})).map((function(e,r){return{element:t,attributeName:n,content:e,index:r}}))},T);function T(e,t,n){this.attributeObserver=new h(e,t,this),this.delegate=n,this.tokensByElement=new A}var P=(Object.defineProperty(S.prototype,"started",{get:function(){return this.tokenListObserver.started},enumerable:!1,configurable:!0}),S.prototype.start=function(){this.tokenListObserver.start()},S.prototype.stop=function(){this.tokenListObserver.stop()},S.prototype.refresh=function(){this.tokenListObserver.refresh()},Object.defineProperty(S.prototype,"element",{get:function(){return this.tokenListObserver.element},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"attributeName",{get:function(){return this.tokenListObserver.attributeName},enumerable:!1,configurable:!0}),S.prototype.tokenMatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))},S.prototype.tokenUnmatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))},S.prototype.fetchParseResultForToken=function(e){var t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t},S.prototype.fetchValuesByTokenForElement=function(e){var t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t},S.prototype.parseToken=function(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}},S);function S(e,t,n){this.tokenListObserver=new k(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}var j=(C.prototype.start=function(){this.valueListObserver||(this.valueListObserver=new P(this.element,this.actionAttribute,this),this.valueListObserver.start())},C.prototype.stop=function(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())},Object.defineProperty(C.prototype,"element",{get:function(){return this.context.element},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"actionAttribute",{get:function(){return this.schema.actionAttribute},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"schema",{get:function(){return this.context.schema},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"bindings",{get:function(){return Array.from(this.bindingsByAction.values())},enumerable:!1,configurable:!0}),C.prototype.connectAction=function(e){var t=new u(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)},C.prototype.disconnectAction=function(e){var t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))},C.prototype.disconnectAllActions=function(){var e=this;this.bindings.forEach((function(t){return e.delegate.bindingDisconnected(t)})),this.bindingsByAction.clear()},C.prototype.parseValueForToken=function(e){if((e=s.forToken(e)).identifier==this.identifier)return e},C.prototype.elementMatchedValue=function(e,t){this.connectAction(t)},C.prototype.elementUnmatchedValue=function(e,t){this.disconnectAction(t)},C);function C(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}var L=(M.prototype.start=function(){this.stringMapObserver.start()},M.prototype.stop=function(){this.stringMapObserver.stop()},Object.defineProperty(M.prototype,"element",{get:function(){return this.context.element},enumerable:!1,configurable:!0}),Object.defineProperty(M.prototype,"controller",{get:function(){return this.context.controller},enumerable:!1,configurable:!0}),M.prototype.getStringMapKeyForAttribute=function(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name},M.prototype.stringMapValueChanged=function(e,t){this.invokeChangedCallbackForValue(t)},M.prototype.invokeChangedCallbacksForDefaultValues=function(){for(var e=0,t=this.valueDescriptors;e<t.length;e++){var n=t[e],r=n.key,o=n.name;null==n.defaultValue||this.controller.data.has(r)||this.invokeChangedCallbackForValue(o)}},M.prototype.invokeChangedCallbackForValue=function(e){var t=this.receiver[e+"Changed"];"function"==typeof t&&(e=this.receiver[e],t.call(this.receiver,e))},Object.defineProperty(M.prototype,"valueDescriptors",{get:function(){var e=this.valueDescriptorMap;return Object.keys(e).map((function(t){return e[t]}))},enumerable:!1,configurable:!0}),M);function M(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new y(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap,this.invokeChangedCallbacksForDefaultValues()}var B=(D.prototype.connect=function(){this.bindingObserver.start(),this.valueObserver.start();try{this.controller.connect()}catch(e){this.handleError(e,"connecting controller")}},D.prototype.disconnect=function(){try{this.controller.disconnect()}catch(e){this.handleError(e,"disconnecting controller")}this.valueObserver.stop(),this.bindingObserver.stop()},Object.defineProperty(D.prototype,"application",{get:function(){return this.module.application},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"identifier",{get:function(){return this.module.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"schema",{get:function(){return this.application.schema},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"dispatcher",{get:function(){return this.application.dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"parentElement",{get:function(){return this.element.parentElement},enumerable:!1,configurable:!0}),D.prototype.handleError=function(e,t,n){void 0===n&&(n={});var r=this.identifier,o=this.controller,i=this.element;n=Object.assign({identifier:r,controller:o,element:i},n),this.application.handleError(e,"Error "+t,n)},D);function D(e,t){this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new j(this,this.dispatcher),this.valueObserver=new L(this,this.controller);try{this.controller.initialize()}catch(e){this.handleError(e,"initializing controller")}}function F(e,t){return e=N(e),Array.from(e.reduce((function(e,n){return function(e,t){return t=e[t],Array.isArray(t)?t:[]}(n,t).forEach((function(t){return e.add(t)})),e}),new Set))}function N(e){for(var t=[];e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}var I,V=window&&window.__extends||(I=function(e,t){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}I(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),K=window&&window.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};function H(e){return n=F(r=t=e,"blessings").reduce((function(e,t){var n,o=t(r);for(n in o){var i=e[n]||{};e[n]=Object.assign(i,o[n])}return e}),{}),e=U(t),n=function(e,t){return R(t).reduce((function(n,r){var o,i=function(e,t,n){if(!(e=Object.getOwnPropertyDescriptor(e,n))||!("value"in e))return n=Object.getOwnPropertyDescriptor(t,n).value,e&&(n.get=e.get||n.get,n.set=e.set||n.set),n}(e,t,r);return i&&Object.assign(n,((o={})[r]=i,o)),n}),{})}(t.prototype,n),Object.defineProperties(e.prototype,n),e;var t,n,r}var R="function"==typeof Object.getOwnPropertySymbols?function(e){return K(Object.getOwnPropertyNames(e),Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,U=function(){function e(e){function t(){var n=this&&this instanceof t?this.constructor:void 0;return Reflect.construct(e,arguments,n)}return t.prototype=Object.create(e.prototype,{constructor:{value:t}}),Reflect.setPrototypeOf(t,e),t}try{return(t=e((function(){this.a.call(this)}))).prototype.a=function(){},new t,e}catch(e){return function(e){return V(t,n=e),t;function t(){return null!==n&&n.apply(this,arguments)||this}var n}}var t}(),q=(Object.defineProperty(W.prototype,"identifier",{get:function(){return this.definition.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"controllerConstructor",{get:function(){return this.definition.controllerConstructor},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"contexts",{get:function(){return Array.from(this.connectedContexts)},enumerable:!1,configurable:!0}),W.prototype.connectContextForScope=function(e){e=this.fetchContextForScope(e),this.connectedContexts.add(e),e.connect()},W.prototype.disconnectContextForScope=function(e){(e=this.contextsByScope.get(e))&&(this.connectedContexts.delete(e),e.disconnect())},W.prototype.fetchContextForScope=function(e){var t=this.contextsByScope.get(e);return t||(t=new B(this,e),this.contextsByScope.set(e,t)),t},W);function W(e,t){this.application=e,this.definition={identifier:(t=t).identifier,controllerConstructor:H(t.controllerConstructor)},this.contextsByScope=new WeakMap,this.connectedContexts=new Set}var z=(G.prototype.has=function(e){return this.data.has(this.getDataKey(e))},G.prototype.get=function(e){return this.data.get(this.getDataKey(e))},G.prototype.getAttributeName=function(e){return this.data.getAttributeNameForKey(this.getDataKey(e))},G.prototype.getDataKey=function(e){return e+"-class"},Object.defineProperty(G.prototype,"data",{get:function(){return this.scope.data},enumerable:!1,configurable:!0}),G);function G(e){this.scope=e}function J(e){return e.charAt(0).toUpperCase()+e.slice(1)}function X(e){return e.replace(/([A-Z])/g,(function(e,t){return"-"+t.toLowerCase()}))}var Y=(Object.defineProperty(Z.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(Z.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!1,configurable:!0}),Z.prototype.get=function(e){return e=this.getAttributeNameForKey(e),this.element.getAttribute(e)},Z.prototype.set=function(e,t){var n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,t),this.get(e)},Z.prototype.has=function(e){return e=this.getAttributeNameForKey(e),this.element.hasAttribute(e)},Z.prototype.delete=function(e){return!!this.has(e)&&(e=this.getAttributeNameForKey(e),this.element.removeAttribute(e),!0)},Z.prototype.getAttributeNameForKey=function(e){return"data-"+this.identifier+"-"+X(e)},Z);function Z(e){this.scope=e}var $=(Q.prototype.warn=function(e,t,n){var r=this.warnedKeysByObject.get(e);r||(r=new Set,this.warnedKeysByObject.set(e,r)),r.has(t)||(r.add(t),this.logger.warn(n,e))},Q);function Q(e){this.warnedKeysByObject=new WeakMap,this.logger=e}function ee(e,t){return"["+e+'~="'+t+'"]'}var te=window&&window.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},ne=(Object.defineProperty(re.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"schema",{get:function(){return this.scope.schema},enumerable:!1,configurable:!0}),re.prototype.has=function(e){return null!=this.find(e)},re.prototype.find=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.reduce((function(t,n){return t||e.findTarget(n)||e.findLegacyTarget(n)}),void 0)},re.prototype.findAll=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.reduce((function(t,n){return te(t,e.findAllTargets(n),e.findAllLegacyTargets(n))}),[])},re.prototype.findTarget=function(e){return e=this.getSelectorForTargetName(e),this.scope.findElement(e)},re.prototype.findAllTargets=function(e){return e=this.getSelectorForTargetName(e),this.scope.findAllElements(e)},re.prototype.getSelectorForTargetName=function(e){return ee("data-"+this.identifier+"-target",e)},re.prototype.findLegacyTarget=function(e){var t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)},re.prototype.findAllLegacyTargets=function(e){var t=this,n=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(n).map((function(n){return t.deprecate(n,e)}))},re.prototype.getLegacySelectorForTargetName=function(e){return e=this.identifier+"."+e,ee(this.schema.targetAttribute,e)},re.prototype.deprecate=function(e,t){var n,r;return e&&(n=this.identifier,r=this.schema.targetAttribute,this.guide.warn(e,"target:"+t,"Please replace "+r+'="'+n+"."+t+'" with data-'+n+'-target="'+t+'". The '+r+" attribute is deprecated and will be removed in a future version of Stimulus.")),e},Object.defineProperty(re.prototype,"guide",{get:function(){return this.scope.guide},enumerable:!1,configurable:!0}),re);function re(e){this.scope=e}var oe=window&&window.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},ie=(se.prototype.findElement=function(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)},se.prototype.findAllElements=function(e){return oe(this.element.matches(e)?[this.element]:[],this.queryElements(e).filter(this.containsElement))},se.prototype.queryElements=function(e){return Array.from(this.element.querySelectorAll(e))},Object.defineProperty(se.prototype,"controllerSelector",{get:function(){return ee(this.schema.controllerAttribute,this.identifier)},enumerable:!1,configurable:!0}),se);function se(e,t,n,r){var o=this;this.targets=new ne(this),this.classes=new z(this),this.data=new Y(this),this.containsElement=function(e){return e.closest(o.controllerSelector)===o.element},this.schema=e,this.element=t,this.identifier=n,this.guide=new $(r)}var ae=(ce.prototype.start=function(){this.valueListObserver.start()},ce.prototype.stop=function(){this.valueListObserver.stop()},Object.defineProperty(ce.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!1,configurable:!0}),ce.prototype.parseValueForToken=function(e){var t=e.element,n=e.content,r=this.fetchScopesByIdentifierForElement(t);return(e=r.get(n))||(e=this.delegate.createScopeForElementAndIdentifier(t,n),r.set(n,e)),e},ce.prototype.elementMatchedValue=function(e,t){var n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),1==n&&this.delegate.scopeConnected(t)},ce.prototype.elementUnmatchedValue=function(e,t){var n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),1==n&&this.delegate.scopeDisconnected(t))},ce.prototype.fetchScopesByIdentifierForElement=function(e){var t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t},ce);function ce(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new P(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}var le=(Object.defineProperty(ue.prototype,"element",{get:function(){return this.application.element},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"schema",{get:function(){return this.application.schema},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"logger",{get:function(){return this.application.logger},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"modules",{get:function(){return Array.from(this.modulesByIdentifier.values())},enumerable:!1,configurable:!0}),Object.defineProperty(ue.prototype,"contexts",{get:function(){return this.modules.reduce((function(e,t){return e.concat(t.contexts)}),[])},enumerable:!1,configurable:!0}),ue.prototype.start=function(){this.scopeObserver.start()},ue.prototype.stop=function(){this.scopeObserver.stop()},ue.prototype.loadDefinition=function(e){this.unloadIdentifier(e.identifier),e=new q(this.application,e),this.connectModule(e)},ue.prototype.unloadIdentifier=function(e){(e=this.modulesByIdentifier.get(e))&&this.disconnectModule(e)},ue.prototype.getContextForElementAndIdentifier=function(e,t){if(t=this.modulesByIdentifier.get(t))return t.contexts.find((function(t){return t.element==e}))},ue.prototype.handleError=function(e,t,n){this.application.handleError(e,t,n)},ue.prototype.createScopeForElementAndIdentifier=function(e,t){return new ie(this.schema,e,t,this.logger)},ue.prototype.scopeConnected=function(e){this.scopesByIdentifier.add(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)},ue.prototype.scopeDisconnected=function(e){this.scopesByIdentifier.delete(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)},ue.prototype.connectModule=function(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((function(t){return e.connectContextForScope(t)}))},ue.prototype.disconnectModule=function(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach((function(t){return e.disconnectContextForScope(t)}))},ue);function ue(e){this.application=e,this.scopeObserver=new ae(this.element,this.schema,this),this.scopesByIdentifier=new A,this.modulesByIdentifier=new Map}var pe={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target"},de=window&&window.__awaiter||function(e,t,n,r){return new(n=n||Promise)((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},fe=window&&window.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s={next:a(0),throw:a(1),return:a(2)};return"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=0<(o=i.trys).length&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}},he=window&&window.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r},me=(ye.start=function(e,t){return(t=new ye(e,t)).start(),t},ye.prototype.start=function(){return de(this,void 0,void 0,(function(){return fe(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}))];case 1:return e.sent(),this.dispatcher.start(),this.router.start(),[2]}}))}))},ye.prototype.stop=function(){this.dispatcher.stop(),this.router.stop()},ye.prototype.register=function(e,t){this.load({identifier:e,controllerConstructor:t})},ye.prototype.load=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(e)?e:he([e],n)).forEach((function(e){return t.router.loadDefinition(e)}))},ye.prototype.unload=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(e)?e:he([e],n)).forEach((function(e){return t.router.unloadIdentifier(e)}))},Object.defineProperty(ye.prototype,"controllers",{get:function(){return this.router.contexts.map((function(e){return e.controller}))},enumerable:!1,configurable:!0}),ye.prototype.getControllerForElementAndIdentifier=function(e,t){return(t=this.router.getContextForElementAndIdentifier(e,t))?t.controller:null},ye.prototype.handleError=function(e,t,n){this.logger.error("%s\n\n%o\n\n%o",t,e,n)},ye);function ye(e,t){void 0===e&&(e=document.documentElement),void 0===t&&(t=pe),this.logger=console,this.element=e,this.schema=t,this.dispatcher=new r(this),this.router=new le(this)}function ge(e){return function(e,t){return e=X(e)+"-value",{type:t,key:e,name:function(e){return e.replace(/(?:[_-])([a-z0-9])/g,(function(e,t){return t.toUpperCase()}))}(e),get defaultValue(){return be[t]}}}(e[0],function(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}throw new Error('Unknown value type constant "'+e+'"')}(e[1]))}var be={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},ve={array:function(e){if(e=JSON.parse(e),!Array.isArray(e))throw new TypeError("Expected array");return e},boolean:function(e){return!("0"==e||"false"==e)},number:function(e){return parseFloat(e)},object:function(e){if(null===(e=JSON.parse(e))||"object"!=typeof e||Array.isArray(e))throw new TypeError("Expected object");return e},string:function(e){return e}},we={default:function(e){return""+e},array:Ee,object:Ee};function Ee(e){return JSON.stringify(e)}var Oe=(Object.defineProperty(Ae.prototype,"application",{get:function(){return this.context.application},enumerable:!1,configurable:!0}),Object.defineProperty(Ae.prototype,"scope",{get:function(){return this.context.scope},enumerable:!1,configurable:!0}),Object.defineProperty(Ae.prototype,"element",{get:function(){return this.scope.element},enumerable:!1,configurable:!0}),Object.defineProperty(Ae.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!1,configurable:!0}),Object.defineProperty(Ae.prototype,"targets",{get:function(){return this.scope.targets},enumerable:!1,configurable:!0}),Object.defineProperty(Ae.prototype,"classes",{get:function(){return this.scope.classes},enumerable:!1,configurable:!0}),Object.defineProperty(Ae.prototype,"data",{get:function(){return this.scope.data},enumerable:!1,configurable:!0}),Ae.prototype.initialize=function(){},Ae.prototype.connect=function(){},Ae.prototype.disconnect=function(){},Ae.blessings=[function(e){return F(e,"classes").reduce((function(e,t){return Object.assign(e,((e={})[t=(n=t)+"Class"]={get:function(){var e=this.classes;if(e.has(n))return e.get(n);throw e=e.getAttributeName(n),new Error('Missing attribute "'+e+'"')}},e["has"+J(t)]={get:function(){return this.classes.has(n)}},e));var n}),{})},function(e){return F(e,"targets").reduce((function(e,t){return Object.assign(e,((e={})[(n=t)+"Target"]={get:function(){var e=this.targets.find(n);if(e)return e;throw new Error('Missing target element "'+this.identifier+"."+n+'"')}},e[n+"Targets"]={get:function(){return this.targets.findAll(n)}},e["has"+J(n)+"Target"]={get:function(){return this.targets.has(n)}},e));var n}),{})},function(e){var t=function(e,t){return N(e).reduce((function(e,n){var r;return e.push.apply(e,(r=n[t])?Object.keys(r).map((function(e){return[e,r[e]]})):[]),e}),[])}(e,"values");return e={valueDescriptorMap:{get:function(){var e=this;return t.reduce((function(t,n){var r=ge(n);n=e.data.getAttributeNameForKey(r.key);return Object.assign(t,((t={})[n]=r,t))}),{})}}},t.reduce((function(e,t){return Object.assign(e,(t=(n=ge(e=t)).type,r=n.key,e=n.name,o=ve[t],i=we[t]||we.default,(t={})[e]={get:function(){var e=this.data.get(r);return null!==e?o(e):n.defaultValue},set:function(e){void 0===e?this.data.delete(r):this.data.set(r,i(e))}},t["has"+J(e)]={get:function(){return this.data.has(r)}},t));var n,r,o,i}),e)}],Ae.targets=[],Ae.values={},Ae);function Ae(e){this.context=e}e.Application=me,e.Context=B,e.Controller=Oe,e.defaultSchema=pe,Object.defineProperty(e,"__esModule",{value:!0})})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Popper={})}(this,(function(e){"use strict";function t(e){return null==e?window:"[object Window]"===e.toString()?e:(e=e.ownerDocument)&&e.defaultView||window}function n(e){return e instanceof t(e).Element||e instanceof Element}function r(e){return e instanceof t(e).HTMLElement||e instanceof HTMLElement}function o(e){return"undefined"!=typeof ShadowRoot&&(e instanceof t(e).ShadowRoot||e instanceof ShadowRoot)}var i=Math.max,s=Math.min,a=Math.round;function c(e,t){void 0===t&&(t=!1);var n=e.getBoundingClientRect(),o=1,i=1;return r(e)&&t&&(t=e.offsetHeight,0<(e=e.offsetWidth)&&(o=a(n.width)/e||1),0<t&&(i=a(n.height)/t||1)),{width:n.width/o,height:n.height/i,top:n.top/i,right:n.right/o,bottom:n.bottom/i,left:n.left/o,x:n.left/o,y:n.top/i}}function l(e){return{scrollLeft:(e=t(e)).pageXOffset,scrollTop:e.pageYOffset}}function u(e){return e?(e.nodeName||"").toLowerCase():null}function p(e){return((n(e)?e.ownerDocument:e.document)||window.document).documentElement}function d(e){return c(p(e)).left+l(e).scrollLeft}function f(e){return t(e).getComputedStyle(e)}function h(e){var t=(n=f(e)).overflow,n=(e=n.overflowX,n.overflowY);return/auto|scroll|overlay|hidden/.test(t+n+e)}function m(e,n,o){void 0===o&&(o=!1);var i=r(n),s=r(n)&&(s=(m=n).getBoundingClientRect(),f=a(s.width)/m.offsetWidth||1,m=a(s.height)/m.offsetHeight||1,1!==f||1!==m),f=p(n),m=c(e,s);e={scrollLeft:0,scrollTop:0},s={x:0,y:0};return!i&&(i||o)||("body"===u(n)&&!h(f)||(e=(i=n)!==t(i)&&r(i)?{scrollLeft:(o=i).scrollLeft,scrollTop:o.scrollTop}:l(i)),r(n)?((s=c(n,!0)).x+=n.clientLeft,s.y+=n.clientTop):f&&(s.x=d(f))),{x:m.left+e.scrollLeft-s.x,y:m.top+e.scrollTop-s.y,width:m.width,height:m.height}}function y(e){var t=c(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function g(e){return"html"===u(e)?e:e.assignedSlot||e.parentNode||(o(e)?e.host:null)||p(e)}function b(e,n){void 0===n&&(n=[]);var o=function e(t){return 0<=["html","body","#document"].indexOf(u(t))?t.ownerDocument.body:r(t)&&h(t)?t:e(g(t))}(e),i=(e=o===(null==(i=e.ownerDocument)?void 0:i.body),t(o));o=e?[i].concat(i.visualViewport||[],h(o)?o:[]):o,n=n.concat(o);return e?n:n.concat(b(g(o)))}function v(e){return r(e)&&"fixed"!==f(e).position?e.offsetParent:null}function w(e){for(var n=t(e),o=v(e);o&&0<=["table","td","th"].indexOf(u(o))&&"static"===f(o).position;)o=v(o);return(!o||"html"!==u(o)&&("body"!==u(o)||"static"!==f(o).position))&&(o||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&r(e)&&"fixed"===f(e).position)return null;for(var n=g(e);r(n)&&["html","body"].indexOf(u(n))<0;){var o=f(n);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||t&&"filter"===o.willChange||t&&o.filter&&"none"!==o.filter)return n;n=n.parentNode}return null}(e))||n}var E="top",O="bottom",A="right",x="left",_="auto",k=[E,O,A,x],T="start",P="end",S="viewport",j="popper",C=k.reduce((function(e,t){return e.concat([t+"-"+T,t+"-"+P])}),[]),L=[].concat(k,[_]).reduce((function(e,t){return e.concat([t,t+"-"+T,t+"-"+P])}),[]),M=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function B(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[].concat(n).reduce((function(e,t){return e.replace(/%s/,t)}),e)}var D='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',F=["name","enabled","phase","fn","effect","requires","options"];function N(e){return e.split("-")[0]}function I(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&o(n)){var r=t;do{if(r&&e.isSameNode(r))return!0}while(r=r.parentNode||r.host)}return!1}function V(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function K(e,r){return r===S?V((u=t(a=e),h=p(a),m=u.visualViewport,y=h.clientWidth,g=h.clientHeight,h=u=0,m&&(y=m.width,g=m.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(u=m.offsetLeft,h=m.offsetTop)),{width:y,height:g,x:u+d(a),y:h})):n(r)?((s=c(o=r)).top=s.top+o.clientTop,s.left=s.left+o.clientLeft,s.bottom=s.top+o.clientHeight,s.right=s.left+o.clientWidth,s.width=o.clientWidth,s.height=o.clientHeight,s.x=s.left,s.y=s.top,s):V((a=p(e),h=p(a),r=l(a),s=null==(o=a.ownerDocument)?void 0:o.body,e=i(h.scrollWidth,h.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=i(h.scrollHeight,h.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+d(a),r=-r.scrollTop,"rtl"===f(s||h).direction&&(a+=i(h.clientWidth,s?s.clientWidth:0)-e),{width:e,height:o,x:a,y:r}));var o,s,a,u,h,m,y,g}function H(e,t,o){var a,c,l;t="clippingParents"===t?(c=b(g(a=e)),n(l=0<=["absolute","fixed"].indexOf(f(a).position)&&r(a)?w(a):a)?c.filter((function(e){return n(e)&&I(e,l)&&"body"!==u(e)})):[]):[].concat(t),o=(t=[].concat(t,[o]))[0],o=t.reduce((function(t,n){return n=K(e,n),t.top=i(n.top,t.top),t.right=s(n.right,t.right),t.bottom=s(n.bottom,t.bottom),t.left=i(n.left,t.left),t}),K(e,o));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function R(e){return e.split("-")[1]}function U(e){return 0<=["top","bottom"].indexOf(e)?"x":"y"}function q(e){var t,n=e.reference,r=e.element,o=(e=(o=e.placement)?N(o):null,o?R(o):null),i=n.x+n.width/2-r.width/2,s=n.y+n.height/2-r.height/2;switch(e){case E:t={x:i,y:n.y-r.height};break;case O:t={x:i,y:n.y+n.height};break;case A:t={x:n.x+n.width,y:s};break;case x:t={x:n.x-r.width,y:s};break;default:t={x:n.x,y:n.y}}var a=e?U(e):null;if(null!=a){var c="y"===a?"height":"width";switch(o){case T:t[a]=t[a]-(n[c]/2-r[c]/2);break;case P:t[a]=t[a]+(n[c]/2-r[c]/2)}}return t}function W(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function z(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function G(e,t){var r,o=void 0===(l=(t=void 0===t?{}:t).placement)?e.placement:l,i=void 0===(a=t.boundary)?"clippingParents":a,s=void 0===(u=t.rootBoundary)?S:u,a=void 0===(l=t.elementContext)?j:l,l=void 0!==(u=t.altBoundary)&&u,u=W("number"!=typeof(t=void 0===(u=t.padding)?0:u)?t:z(t,k)),d=(t=e.rects.popper,l=H(n(l=e.elements[l?a===j?"reference":j:a])?l:l.contextElement||p(e.elements.popper),i,s),s=q({reference:i=c(e.elements.reference),element:t,strategy:"absolute",placement:o}),s=V(Object.assign({},t,s)),i=a===j?s:i,{top:l.top-i.top+u.top,bottom:i.bottom-l.bottom+u.bottom,left:l.left-i.left+u.left,right:i.right-l.right+u.right});e=e.modifiersData.offset;return a===j&&e&&(r=e[o],Object.keys(d).forEach((function(e){var t=0<=[A,O].indexOf(e)?1:-1,n=0<=[E,O].indexOf(e)?"y":"x";d[e]+=r[n]*t}))),d}var J="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",X={placement:"bottom",modifiers:[],strategy:"absolute"};function Y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function Z(e){var t=(e=void 0===e?{}:e).defaultModifiers,r=void 0===t?[]:t,o=void 0===(e=e.defaultOptions)?X:e;return function(e,t,i){void 0===i&&(i=o);var s,a,c={placement:"bottom",orderedModifiers:[],options:Object.assign({},X,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],u=!1,p={state:c,setOptions:function(i){i="function"==typeof i?i(c.options):i,d(),c.options=Object.assign({},o,c.options,i),c.scrollParents={reference:n(e)?b(e):e.contextElement?b(e.contextElement):[],popper:b(t)};var s,a,u,h,m;i=[].concat(r,c.options.modifiers),a=i.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{}),i=Object.keys(a).map((function(e){return a[e]})),s=function(e){var t=new Map,n=new Set,r=[];return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||function e(o){n.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach((function(r){n.has(r)||(r=t.get(r))&&e(r)})),r.push(o)}(e)})),r}(i),i=M.reduce((function(e,t){return e.concat(s.filter((function(e){return e.phase===t})))}),[]);return c.orderedModifiers=i.filter((function(e){return e.enabled})),i=[].concat(i,c.options.modifiers),h=function(e){return e.name},m=new Set,i=i.filter((function(e){if(e=h(e),!m.has(e))return m.add(e),!0})),(u=i).forEach((function(e){[].concat(Object.keys(e),F).filter((function(e,t,n){return n.indexOf(e)===t})).forEach((function(t){switch(t){case"name":"string"!=typeof e.name&&console.error(B(D,String(e.name),'"name"','"string"','"'+String(e.name)+'"'));break;case"enabled":"boolean"!=typeof e.enabled&&console.error(B(D,e.name,'"enabled"','"boolean"','"'+String(e.enabled)+'"'));break;case"phase":M.indexOf(e.phase)<0&&console.error(B(D,e.name,'"phase"',"either "+M.join(", "),'"'+String(e.phase)+'"'));break;case"fn":"function"!=typeof e.fn&&console.error(B(D,e.name,'"fn"','"function"','"'+String(e.fn)+'"'));break;case"effect":null!=e.effect&&"function"!=typeof e.effect&&console.error(B(D,e.name,'"effect"','"function"','"'+String(e.fn)+'"'));break;case"requires":null==e.requires||Array.isArray(e.requires)||console.error(B(D,e.name,'"requires"','"array"','"'+String(e.requires)+'"'));break;case"requiresIfExists":Array.isArray(e.requiresIfExists)||console.error(B(D,e.name,'"requiresIfExists"','"array"','"'+String(e.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+e.name+'" modifier, valid properties are '+F.map((function(e){return'"'+e+'"'})).join(", ")+'; but "'+t+'" was provided.')}e.requires&&e.requires.forEach((function(t){null==u.find((function(e){return e.name===t}))&&console.error(B('Popper: modifier "%s" requires "%s", but "%s" modifier is not available',String(e.name),t,t))}))}))})),N(c.options.placement)===_&&(c.orderedModifiers.find((function(e){return"flip"===e.name}))||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))),[(i=f(t)).marginTop,i.marginRight,i.marginBottom,i.marginLeft].some((function(e){return parseFloat(e)}))&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" ")),c.orderedModifiers.forEach((function(e){var t=e.name,n=e.options;"function"==typeof(e=e.effect)&&(n=e({state:c,name:t,instance:p,options:void 0===n?{}:n}),l.push(n||function(){}))})),p.update()},forceUpdate:function(){if(!u){var e,t=(e=c.elements).reference;if(Y(t,e=e.popper)){c.rects={reference:m(t,w(e),"fixed"===c.options.strategy),popper:y(e)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach((function(e){return c.modifiersData[e.name]=Object.assign({},e.data)}));for(var n,r,o,i=0,s=0;s<c.orderedModifiers.length;s++){if(100<(i+=1)){console.error("Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.");break}!0!==c.reset?(n=(o=c.orderedModifiers[s]).fn,r=o.options,o=o.name,"function"==typeof n&&(c=n({state:c,options:void 0===r?{}:r,name:o,instance:p})||c)):(c.reset=!1,s=-1)}}else console.error(J)}},update:(s=function(){return new Promise((function(e){p.forceUpdate(),e(c)}))},function(){return a=a||new Promise((function(e){Promise.resolve().then((function(){a=void 0,e(s())}))}))}),destroy:function(){d(),u=!0}};return Y(e,t)?p.setOptions(i).then((function(e){!u&&i.onFirstUpdate&&i.onFirstUpdate(e)})):console.error(J),p;function d(){l.forEach((function(e){return e()})),l=[]}}}var $={passive:!0},Q={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var n=e.state,r=e.instance,o=e.options,i=void 0===(e=o.scroll)||e,s=void 0===(o=o.resize)||o,a=t(n.elements.popper),c=[].concat(n.scrollParents.reference,n.scrollParents.popper);return i&&c.forEach((function(e){e.addEventListener("scroll",r.update,$)})),s&&a.addEventListener("resize",r.update,$),function(){i&&c.forEach((function(e){e.removeEventListener("scroll",r.update,$)})),s&&a.removeEventListener("resize",r.update,$)}},data:{}},ee={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state;e=e.name;t.modifiersData[e]=q({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},te={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ne(e){var n=e.popper,r=e.popperRect,o=e.placement,i=e.variation,s=e.offsets,c=e.position,l=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,h=e.isFixed,m=void 0===(T=s.x)?0:T,y=s.y,g=void 0===y?0:y,b="function"==typeof d?d({x:m,y:g}):{x:m,y:g},v=(m=b.x,g=b.y,s.hasOwnProperty("x")),_=s.hasOwnProperty("y"),k=x,T=(e=E,window);u&&(y="clientHeight",b="clientWidth",(s=w(n))===t(n)&&"static"!==f(s=p(n)).position&&"absolute"===c&&(y="scrollHeight",b="scrollWidth"),o!==E&&(o!==x&&o!==A||i!==P)||(e=O,g-=(h&&T.visualViewport?T.visualViewport.height:s[y])-r.height,g*=l?1:-1),o!==x&&(o!==E&&o!==O||i!==P)||(k=A,m-=(h&&T.visualViewport?T.visualViewport.width:s[b])-r.width,m*=l?1:-1));var S;c=Object.assign({position:c},u&&te);return m=(S=!0===d?(u=(S={x:m,y:g}).x,d=S.y,S=window.devicePixelRatio||1,{x:a(u*S)/S||0,y:a(d*S)/S||0}):{x:m,y:g}).x,g=S.y,l?Object.assign({},c,((l={})[e]=_?"0":"",l[k]=v?"0":"",l.transform=(T.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",l)):Object.assign({},c,((c={})[e]=_?g+"px":"",c[k]=v?m+"px":"",c.transform="",c))}var re={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=(e=void 0===(n=(r=e.options).gpuAcceleration)||n,void 0===(n=r.adaptive)||n),r=void 0===(r=r.roundOffsets)||r,o=f(t.elements.popper).transitionProperty||"";n&&["transform","top","right","bottom","left"].some((function(e){return 0<=o.indexOf(e)}))&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',"\n\n",'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.","\n\n","We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" ")),e={placement:N(t.placement),variation:R(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:e,isFixed:"fixed"===t.options.strategy},null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ne(Object.assign({},e,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:n,roundOffsets:r})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ne(Object.assign({},e,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:r})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},oe={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},o=t.attributes[e]||{},i=t.elements[e];r(i)&&u(i)&&(Object.assign(i.style,n),Object.keys(o).forEach((function(e){var t=o[e];!1===t?i.removeAttribute(e):i.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var o=t.elements[e],i=t.attributes[e]||{};e=Object.keys((t.styles.hasOwnProperty(e)?t.styles:n)[e]).reduce((function(e,t){return e[t]="",e}),{});r(o)&&u(o)&&(Object.assign(o.style,e),Object.keys(i).forEach((function(e){o.removeAttribute(e)})))}))}},requires:["computeStyles"]},ie={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=void 0===(i=n.offset)?[0,0]:i,i=(e=L.reduce((function(e,n){var r,i,s,a;return e[n]=(r=n,i=t.rects,s=o,a=N(r),n=0<=[x,E].indexOf(a)?-1:1,s=(s=(r="function"==typeof s?s(Object.assign({},i,{placement:r})):s)[0])||0,r=((r=r[1])||0)*n,0<=[x,A].indexOf(a)?{x:r,y:s}:{x:s,y:r}),e}),{}),(n=e[t.placement]).x);n=n.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=i,t.modifiersData.popperOffsets.y+=n),t.modifiersData[r]=e}},se={left:"right",right:"left",bottom:"top",top:"bottom"};function ae(e){return e.replace(/left|right|bottom|top/g,(function(e){return se[e]}))}var ce={start:"end",end:"start"};function le(e){return e.replace(/start|end/g,(function(e){return ce[e]}))}var ue={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=void 0===(s=n.mainAxis)||s,i=void 0===(e=n.altAxis)||e,s=n.fallbackPlacements,a=n.padding,c=n.boundary,l=n.rootBoundary,u=n.altBoundary,p=void 0===(e=n.flipVariations)||e,d=n.allowedAutoPlacements,f=(n=N(e=t.options.placement),n=s||(n!==e&&p?function(e){if(N(e)===_)return[];var t=ae(e);return[le(e),t,le(t)]}(e):[ae(e)]),[e].concat(n).reduce((function(e,n){return e.concat(N(n)===_?function(e,t){var n=(t=void 0===t?{}:t).placement,r=t.boundary,o=t.rootBoundary,i=t.padding,s=t.flipVariations,a=void 0===(t=t.allowedAutoPlacements)?L:t,c=R(n);n=c?s?C:C.filter((function(e){return R(e)===c})):k;0===(s=n.filter((function(e){return 0<=a.indexOf(e)}))).length&&(s=n,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var l=s.reduce((function(t,n){return t[n]=G(e,{placement:n,boundary:r,rootBoundary:o,padding:i})[N(n)],t}),{});return Object.keys(l).sort((function(e,t){return l[e]-l[t]}))}(t,{placement:n,boundary:c,rootBoundary:l,padding:a,flipVariations:p,allowedAutoPlacements:d}):n)}),[])),h=t.rects.reference,m=t.rects.popper,y=new Map,g=!0,b=f[0],v=0;v<f.length;v++){var w=f[v],P=N(w),S=R(w)===T,j=(B=0<=[E,O].indexOf(P))?"width":"height",M=G(t,{placement:w,boundary:c,rootBoundary:l,altBoundary:u,padding:a}),B=B?S?A:x:S?O:E;if(h[j]>m[j]&&(B=ae(B)),S=ae(B),j=[],o&&j.push(M[P]<=0),i&&j.push(M[B]<=0,M[S]<=0),j.every((function(e){return e}))){b=w,g=!1;break}y.set(w,j)}if(g)for(var D=p?3:1;0<D&&"break"!==function(e){var t=f.find((function(t){if(t=y.get(t))return t.slice(0,e).every((function(e){return e}))}));if(t)return b=t,"break"}(D);D--);t.placement!==b&&(t.modifiersData[r]._skip=!0,t.placement=b,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function pe(e,t,n){return i(e,s(t,n))}var de={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t,n,r,o=e.state,a=e.options,c=e.name,l=a.mainAxis,u=void 0===l||l,p=void 0!==(M=a.altAxis)&&M,d=a.boundary,f=a.rootBoundary,h=a.altBoundary,m=a.padding,g=void 0===(B=a.tether)||B,b=a.tetherOffset,v=void 0===b?0:b,_=G(o,{boundary:d,rootBoundary:f,padding:m,altBoundary:h}),k=N(o.placement),P=R(o.placement),S=!P,j="x"===(r=U(k))?"y":"x",C=o.modifiersData.popperOffsets,L=o.rects.reference,M=(e=o.rects.popper,"number"==typeof(l="function"==typeof v?v(Object.assign({},o.rects,{placement:o.placement})):v)?{mainAxis:l,altAxis:l}:Object.assign({mainAxis:0,altAxis:0},l)),B=o.modifiersData.offset?o.modifiersData.offset[o.placement]:null;a={x:0,y:0};C&&(u&&(b="y"===r?"height":"width",f=(t=C[r])+_[d="y"===r?E:x],n=t-_[m="y"===r?O:A],h=g?-e[b]/2:0,v=(P===T?L:e)[b],l=P===T?-e[b]:-L[b],u=o.elements.arrow,P=g&&u?y(u):{width:0,height:0},d=(u=o.modifiersData["arrow#persistent"]?o.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0})[d],m=u[m],P=pe(0,L[b],P[b]),d=S?L[b]/2-h-P-d-M.mainAxis:v-P-d-M.mainAxis,l=S?-L[b]/2+h+P+m+M.mainAxis:l+P+m+M.mainAxis,m=(P=o.elements.arrow&&w(o.elements.arrow))?"y"===r?P.clientTop||0:P.clientLeft||0:0,P=t+l-(l=null!=(P=null==B?void 0:B[r])?P:0),n=pe(g?s(f,t+d-l-m):f,t,g?i(n,P):n),C[r]=n,a[r]=n-t),p&&(n="y"==j?"height":"width",p=(t=C[j])+_["x"===r?E:x],_=t-_["x"===r?O:A],r=-1!==[E,x].indexOf(k),B=null!=(k=null==B?void 0:B[j])?k:0,k=r?p:t-L[n]-e[n]-B+M.altAxis,B=r?t+L[n]+e[n]-B-M.altAxis:_,_=g&&r?(M=pe(k,M=t,r=B),r<M?r:M):pe(g?k:p,t,g?B:_),C[j]=_,a[j]=_-t),o.modifiersData[c]=a)},requiresIfExists:["offset"]},fe={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n,r=e.state,o=e.name,i=e.options,s=r.elements.arrow,a=r.modifiersData.popperOffsets,c=N(r.placement),l=U(c),u=0<=[x,A].indexOf(c)?"height":"width";s&&a&&(n=r,e=W("number"!=typeof(t="function"==typeof(t=i.padding)?t(Object.assign({},n.rects,{placement:n.placement})):t)?t:z(t,k)),c=y(s),i="y"===l?E:x,n="y"===l?O:A,t=r.rects.reference[u]+r.rects.reference[l]-a[l]-r.rects.popper[u],a=a[l]-r.rects.reference[l],s=(s=w(s))?"y"===l?s.clientHeight||0:s.clientWidth||0:0,i=e[i],n=s-c[u]-e[n],n=pe(i,a=s/2-c[u]/2+(t/2-a/2),n),r.modifiersData[o]=((o={})[l]=n,o.centerOffset=n-a,o))},effect:function(e){var t=e.state;null!=(e=void 0===(e=e.options.element)?"[data-popper-arrow]":e)&&("string"==typeof e&&!(e=t.elements.popper.querySelector(e))||(r(e)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),I(t.elements.popper,e)?t.elements.arrow=e:console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "))))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function he(e,t,n){return{top:e.top-t.height-(n=void 0===n?{x:0,y:0}:n).y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function me(e){return[E,A,O,x].some((function(t){return 0<=e[t]}))}var ye={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,s=G(t,{elementContext:"reference"});e=G(t,{altBoundary:!0}),r=he(s,r),e=he(e,o,i),o=me(r),i=me(e);t.modifiersData[n]={referenceClippingOffsets:r,popperEscapeOffsets:e,isReferenceHidden:o,hasPopperEscaped:i},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":o,"data-popper-escaped":i})}},ge=Z({defaultModifiers:[Q,ee,re,oe]}),be=[Q,ee,re,oe,ie,ue,de,fe,ye],ve=Z({defaultModifiers:be});e.applyStyles=oe,e.arrow=fe,e.computeStyles=re,e.createPopper=ve,e.createPopperLite=ge,e.defaultModifiers=be,e.detectOverflow=G,e.eventListeners=Q,e.flip=ue,e.hide=ye,e.offset=ie,e.popperGenerator=Z,e.popperOffsets=ee,e.preventOverflow=de,Object.defineProperty(e,"__esModule",{value:!0})}));var __extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};!function(e){var t,n=(t=Stimulus.Application,__extends(r,t),r.prototype.load=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];for(var i=Array.isArray(n)?n:__spreadArray([n],r,!0),s=0,a=i;s<a.length;s++){var c=a[s];c=/^s-/.test(c.identifier);if(e._initializing&&!c)throw'Stacks-created Stimulus controller names must start with "s-".';if(!e._initializing&&c)throw'The "s-" prefix on Stimulus controller names is reserved for Stacks-created controllers.'}t.prototype.load.call(this,i)},r.start=function(e,t){return(t=new r(e,t)).start(),t},r);function r(){return null!==t&&t.apply(this,arguments)||this}e.application=n.start(),e._initializing=!0;var o,i=(o=Stimulus.Controller,__extends(s,o),s.prototype.getElementData=function(e,t){return e.getAttribute("data-"+this.identifier+"-"+t)},s.prototype.setElementData=function(e,t,n){e.setAttribute("data-"+this.identifier+"-"+t,n)},s.prototype.removeElementData=function(e,t){e.removeAttribute("data-"+this.identifier+"-"+t)},s.prototype.triggerEvent=function(e,t,n){var r;e=this.identifier+":"+e;try{r=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t})}catch(n){(r=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t)}return(n||this.element).dispatchEvent(r),r},s);function s(){return null!==o&&o.apply(this,arguments)||this}function a(e){var t,n,r,o,s=e.hasOwnProperty("targets")?(__extends(c,r=i),(t=c).targets=e.targets,t):(__extends(a,n=i),a);function a(){return null!==n&&n.apply(this,arguments)||this}function c(){return null!==r&&r.apply(this,arguments)||this}for(o in e)"targets"!==o&&e.hasOwnProperty(o)&&Object.defineProperty(s.prototype,o,Object.getOwnPropertyDescriptor(e,o));return s}e.StacksController=i,e.createController=a,e.addController=function(t,n){e.application.register(t,a(n))}}(Stacks=Stacks||{}),__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),function(e){var t,n=(t=e.StacksController,__extends(r,t),r.prototype.copy=function(){this.sourceTarget.select(),document.execCommand("copy")},r.targets=["source"],r);function r(){return null!==t&&t.apply(this,arguments)||this}e.CopyController=n}(Stacks=Stacks||{}),Stacks.application.register("s-copy",Stacks.CopyController),__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),function(){var e="s-expandable-control:radio-off";function t(t){var n=t.target;n instanceof HTMLInputElement&&"INPUT"===n.nodeName&&"radio"===n.type&&document.querySelectorAll('input[type="radio"][name="'+n.name+'"]').forEach((function(n){if(n!==t.target){var r;try{r=new Event(e)}catch(n){(r=document.createEvent("Event")).initEvent(e,!0,!0)}n.dispatchEvent(r)}}))}var n,r=0;function o(e){e?1==++r&&document.body.addEventListener("change",t):0==--r&&document.body.removeEventListener("change",t)}function i(){var e=null!==n&&n.apply(this,arguments)||this;return e.lastKeydownClickTimestamp=0,e}Stacks.application.register("s-expandable-control",(n=Stacks.StacksController,__extends(i,n),i.prototype.initialize=function(){"INPUT"===this.element.nodeName&&0<=["radio","checkbox"].indexOf(this.element.type)?(this.isCollapsed=this._isCollapsedForCheckable,this.events=["change",e],this.isCheckable=!0,this.isRadio="radio"===this.element.type):(this.isCollapsed=this._isCollapsedForClickable,this.events=["click","keydown"]),this.listener=this.listener.bind(this)},i.prototype._isCollapsedForClickable=function(){var e=this.controlledCollapsibles;return 0<e.length?!e.every((function(e){return e.classList.contains("is-expanded")})):"false"===this.element.getAttribute("aria-expanded")},i.prototype._isCollapsedForCheckable=function(){return!this.element.checked},Object.defineProperty(i.prototype,"controlledCollapsibles",{get:function(){var e=this.element.getAttribute("aria-controls");if(!e)throw'[aria-controls="targetId1 ... targetIdN"] attribute required';if(!(e=e.split(/\s+/g).map((function(e){return document.getElementById(e)})).filter((function(e){return!!e}))).length)throw"couldn't find controls";return e},enumerable:!1,configurable:!0}),i.prototype._dispatchShowHideEvent=function(e){this.triggerEvent(e?"show":"hide")},i.prototype._toggleClass=function(e){if(this.data.has("toggle-class")){var t=this.element.classList,n=this.data.get("toggle-class");if(!n)throw"couldn't find toggle class";n.split(/\s+/).forEach((function(n){t.toggle(n,!!e)}))}},i.prototype.listener=function(e){var t;if(this.isCheckable)t=!this.element.checked;else{if("keydown"==e.type&&e instanceof KeyboardEvent&&13!=e.keyCode&&32!=e.keyCode)return;if(e.target!==e.currentTarget&&0<=["A","BUTTON"].indexOf(e.target.nodeName))return;if(e.preventDefault(),"keydown"==e.type)this.lastKeydownClickTimestamp=Date.now();else if("click"==e.type&&Date.now()-this.lastKeydownClickTimestamp<300)return;t="true"===this.element.getAttribute("aria-expanded"),"click"===e.type&&this.element.blur()}this.element.setAttribute("aria-expanded",t?"false":"true");for(var n=0,r=this.controlledCollapsibles;n<r.length;n++)r[n].classList.toggle("is-expanded",!t);this._dispatchShowHideEvent(!t),this._toggleClass(!t)},i.prototype.connect=function(){var e=this;if(this.events.forEach((function(t){e.element.addEventListener(t,e.listener)}),this),this.isRadio&&o(!0),this.element.setAttribute("aria-expanded",this.isCollapsed()?"false":"true"),this.isCheckable){var t=this.controlledCollapsibles;if(t.length){var n=!this.isCollapsed();if(t.some((function(e){return e.classList.contains("is-expanded")!==n}))){for(var r=0,i=this.controlledCollapsibles;r<i.length;r++)i[r].classList.toggle("is-expanded",n);this._dispatchShowHideEvent(n),this._toggleClass(n)}}}},i.prototype.disconnect=function(){var e=this;this.events.forEach((function(t){e.element.removeEventListener(t,e.listener)}),this),this.isRadio&&o(!1)},i))}(),__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__spreadArray=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},function(e){var t,n=(t=e.StacksController,__extends(r,t),r.prototype.connect=function(){this.validate()},r.prototype.disconnect=function(){this.unbindDocumentEvents()},r.prototype.toggle=function(e){this._toggle(void 0,e=void 0===e?null:e)},r.prototype.show=function(e){this._toggle(!0,e=void 0===e?null:e)},r.prototype.hide=function(e){this._toggle(!1,e=void 0===e?null:e)},r.prototype.validate=function(){var e=this.data.get("return-element");if(e&&(this.returnElement=document.querySelector(e),!this.returnElement))throw"Unable to find element by return-element selector: "+e},r.prototype._toggle=function(e,t){var n=this;void 0===t&&(t=null);var r,o=e;e="false"===this.modalTarget.getAttribute("aria-hidden");(o=void 0===o?!e:o)&&e||!o&&!e||(r=this.getDispatcher(t),(t=this.triggerEvent(o?"show":"hide",{returnElement:this.returnElement,dispatcher:this.getDispatcher(r)},this.modalTarget)).defaultPrevented||(this.returnElement=t.detail.returnElement,this.modalTarget.setAttribute("aria-hidden",o?"false":"true"),o?(this.bindDocumentEvents(),this.focusInsideModal()):(this.unbindDocumentEvents(),this.focusReturnElement(),this.removeModalOnHide()),void 0!==this.modalTarget.ontransitionend?this.modalTarget.addEventListener("transitionend",(function(){n.triggerEvent(o?"shown":"hidden",{dispatcher:r},n.modalTarget)}),{once:!0}):this.triggerEvent(o?"shown":"hidden",{dispatcher:r},this.modalTarget)))},r.prototype.focusReturnElement=function(){var e=this;this.returnElement&&this.modalTarget.addEventListener("s-modal:hidden",(function(){e.returnElement&&document.body.contains(e.returnElement)&&e.returnElement.focus()}),{once:!0})},r.prototype.removeModalOnHide=function(){var e=this;"true"===this.data.get("remove-when-hidden")&&this.modalTarget.addEventListener("s-modal:hidden",(function(){e.element.remove()}),{once:!0})},r.prototype.getAllTabbables=function(){return Array.from(this.modalTarget.querySelectorAll("[href], input, select, textarea, button, [tabindex]")).filter((function(e){return e.matches(":not([disabled]):not([tabindex='-1'])")}))},r.prototype.firstVisible=function(e){return e.find((function(e){return null!==e.offsetParent}))},r.prototype.lastVisible=function(e){return this.firstVisible(__spreadArray([],e,!0).reverse())},r.prototype.focusInsideModal=function(){var e=this;this.modalTarget.addEventListener("s-modal:shown",(function(){var t=null!==(t=e.firstVisible(e.initialFocusTargets))&&void 0!==t?t:e.firstVisible(e.getAllTabbables());null!=t&&t.focus()}),{once:!0})},r.prototype.keepFocusWithinModal=function(e){var t,n;this.modalTarget.contains(e.target)?"Tab"===e.key&&(t=this.getAllTabbables(),n=this.firstVisible(t),t=this.lastVisible(t),n&&t&&(n===t?(e.preventDefault(),n.focus()):e.shiftKey&&e.target===n?(e.preventDefault(),t.focus()):e.shiftKey||e.target!==t||(e.preventDefault(),n.focus()))):(n=this.firstVisible(this.getAllTabbables()))&&(e.preventDefault(),n.focus())},r.prototype.bindDocumentEvents=function(){this._boundClickFn=this._boundClickFn||this.hideOnOutsideClick.bind(this),this._boundKeypressFn=this._boundKeypressFn||this.hideOnEscapePress.bind(this),this._boundTabTrap=this._boundTabTrap||this.keepFocusWithinModal.bind(this),document.addEventListener("mousedown",this._boundClickFn),document.addEventListener("keyup",this._boundKeypressFn),document.addEventListener("keydown",this._boundTabTrap)},r.prototype.unbindDocumentEvents=function(){document.removeEventListener("mousedown",this._boundClickFn),document.removeEventListener("keyup",this._boundKeypressFn),document.removeEventListener("keydown",this._boundTabTrap)},r.prototype.hideOnOutsideClick=function(e){var t=e.target;!this.modalTarget.querySelector(".s-modal--dialog").contains(t)&&document.body.contains(t)&&this._toggle(!1,e)},r.prototype.hideOnEscapePress=function(e){27===e.which&&"true"!==this.modalTarget.getAttribute("aria-hidden")&&this._toggle(!1,e)},r.prototype.getDispatcher=function(e){return(e=void 0===e?null:e)instanceof Event?e.target:e instanceof Element?e:this.element},r.targets=["modal","initialFocus"],r);function r(){return null!==t&&t.apply(this,arguments)||this}function o(t,n){if(!(t=e.application.getControllerForElementAndIdentifier(t,"s-modal")))throw"Unable to get s-modal controller from element";n?t.show():t.hide()}e.ModalController=n,e.showModal=function(e){o(e,!0)},e.hideModal=function(e){o(e,!1)}}(Stacks=Stacks||{}),Stacks.application.register("s-modal",Stacks.ModalController),__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),function(e){var t,n=(t=e.StacksController,__extends(r,t),r.prototype.connect=function(){t.prototype.connect.call(this),this.boundSelectTab=this.selectTab.bind(this),this.boundHandleKeydown=this.handleKeydown.bind(this);for(var e=0,n=this.tabTargets;e<n.length;e++){var r=n[e];r.addEventListener("click",this.boundSelectTab),r.addEventListener("keydown",this.boundHandleKeydown)}},r.prototype.disconnect=function(){t.prototype.disconnect.call(this);for(var e=0,n=this.tabTargets;e<n.length;e++){var r=n[e];r.removeEventListener("click",this.boundSelectTab),r.removeEventListener("keydown",this.boundHandleKeydown)}},Object.defineProperty(r.prototype,"tabTargets",{get:function(){return Array.from(this.element.querySelectorAll("[role=tab]"))},enumerable:!1,configurable:!0}),r.prototype.selectTab=function(e){this.switchToTab(e.currentTarget)},r.prototype.handleKeydown=function(e){var t=e.currentTarget,n=this.tabTargets,r=n.indexOf(t);if("ArrowRight"===e.key)r++;else{if("ArrowLeft"!==e.key)return;r--}t=n[r=(r=r<0?n.length-1:r)>=n.length?0:r],this.switchToTab(t),null!==(t=this.selectedTab)&&void 0!==t&&t.focus()},r.prototype.switchToTab=function(e){var t=this.selectedTab;t!==e&&(this.triggerEvent("select",{oldTab:t,newTab:e}).defaultPrevented||(this.selectedTab=e,this.triggerEvent("selected",{oldTab:t,newTab:e})))},Object.defineProperty(r.prototype,"selectedTab",{get:function(){return this.tabTargets.find((function(e){return"true"===e.getAttribute("aria-selected")}))||null},set:function(e){for(var t=0,n=this.tabTargets;t<n.length;t++){var r=n[t],o=(o=r.getAttribute("aria-controls"))?document.getElementById(o):null;r===e?(r.classList.add("is-selected"),r.setAttribute("aria-selected","true"),r.removeAttribute("tabindex"),null!=o&&o.classList.remove("d-none")):(r.classList.remove("is-selected"),r.setAttribute("aria-selected","false"),r.setAttribute("tabindex","-1"),null!=o&&o.classList.add("d-none"))}},enumerable:!1,configurable:!0}),r);function r(){return null!==t&&t.apply(this,arguments)||this}e.TabListController=n}(Stacks=Stacks||{}),Stacks.application.register("s-navigation-tablist",Stacks.TabListController),__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),function(e){var t,n=(t=e.StacksController,__extends(r,t),Object.defineProperty(r.prototype,"isVisible",{get:function(){var e=this.popoverElement;return!!e&&e.classList.contains("is-visible")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isInViewport",{get:function(){var e=this.popoverElement;if(!this.isVisible||!e)return!1;var t=e.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight);e=Math.max(document.documentElement.clientWidth,window.innerWidth);return 0<t.bottom&&t.top<n&&0<t.right&&t.left<e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shouldHideOnOutsideClick",{get:function(){switch(this.data.get("hide-on-outside-click")){case"after-dismissal":case"never":return!1;case"if-in-viewport":return this.isInViewport;default:return!0}},enumerable:!1,configurable:!0}),r.prototype.connect=function(){t.prototype.connect.call(this),this.validate(),this.isVisible?this.initializePopper():"true"===this.data.get("auto-show")&&this.show(null),this.data.delete("auto-show")},r.prototype.disconnect=function(){this.hide(),this.popper&&(this.popper.destroy(),delete this.popper),t.prototype.disconnect.call(this)},r.prototype.toggle=function(e){void 0===e&&(e=null),this.isVisible?this.hide(e):this.show(e)},r.prototype.show=function(e){void 0===e&&(e=null),this.isVisible||(e=this.getDispatcher(e),this.triggerEvent("show",{dispatcher:e}).defaultPrevented||(this.popper||this.initializePopper(),this.popoverElement.classList.add("is-visible"),this.scheduleUpdate(),this.shown(e)))},r.prototype.hide=function(e){void 0===e&&(e=null),this.isVisible&&(e=this.getDispatcher(e),this.triggerEvent("hide",{dispatcher:e}).defaultPrevented||(this.popoverElement.classList.remove("is-visible"),this.popper&&(this.popper.destroy(),delete this.popper),"after-dismissal"===this.data.get("hide-on-outside-click")&&this.data.delete("hide-on-outside-click"),this.hidden(e)))},r.prototype.shown=function(e){void 0===e&&(e=null),this.bindDocumentEvents(),this.triggerEvent("shown",{dispatcher:e})},r.prototype.hidden=function(e){void 0===e&&(e=null),this.unbindDocumentEvents(),this.triggerEvent("hidden",{dispatcher:e})},r.prototype.generatePopover=function(){return null},r.prototype.initializePopper=function(){this.popper=Popper.createPopper(this.referenceElement,this.popoverElement,{placement:this.data.get("placement")||"bottom",modifiers:[{name:"offset",options:{offset:[0,10]}},{name:"arrow",options:{element:".s-popover--arrow"}}]})},r.prototype.validate=function(){var e=this.data.get("reference-selector");if(this.referenceElement=this.element,e&&(this.referenceElement=this.element.querySelector(e),!this.referenceElement))throw"Unable to find element by reference selector: "+e;var t=this.referenceElement.getAttribute(this.popoverSelectorAttribute);e=null;if(t){if(!(e=document.getElementById(t)))throw"[".concat(this.popoverSelectorAttribute,'="{POPOVER_ID}"] required')}else e=this.generatePopover();if(!e)throw"unable to find or generate popover element";this.popoverElement=e},r.prototype.getDispatcher=function(e){return(e=void 0===e?null:e)instanceof Event?e.target:e instanceof Element?e:this.element},r.prototype.scheduleUpdate=function(){this.popper&&this.isVisible&&this.popper.update()},r);function r(){return null!==t&&t.apply(this,arguments)||this}e.BasePopoverController=n;var o;__extends(i,o=n),i.prototype.shown=function(e){void 0===e&&(e=null),this.toggleOptionalClasses(!0),o.prototype.shown.call(this,e)},i.prototype.hidden=function(e){void 0===e&&(e=null),this.toggleOptionalClasses(!1),o.prototype.hidden.call(this,e)},i.prototype.bindDocumentEvents=function(){this.boundHideOnOutsideClick=this.boundHideOnOutsideClick||this.hideOnOutsideClick.bind(this),this.boundHideOnEscapePress=this.boundHideOnEscapePress||this.hideOnEscapePress.bind(this),document.addEventListener("mousedown",this.boundHideOnOutsideClick),document.addEventListener("keyup",this.boundHideOnEscapePress)},i.prototype.unbindDocumentEvents=function(){document.removeEventListener("mousedown",this.boundHideOnOutsideClick),document.removeEventListener("keyup",this.boundHideOnEscapePress)},i.prototype.hideOnOutsideClick=function(e){var t=e.target;this.shouldHideOnOutsideClick&&!this.referenceElement.contains(t)&&!this.popoverElement.contains(t)&&document.body.contains(t)&&this.hide(e)},i.prototype.hideOnEscapePress=function(e){27===e.which&&this.isVisible&&(this.popoverElement.contains(e.target)&&this.referenceElement.focus(),this.hide(e))},i.prototype.toggleOptionalClasses=function(e){var t;this.data.has("toggle-class")&&(t=this.referenceElement.classList,this.data.get("toggle-class").split(/\s+/).forEach((function(n){t.toggle(n,e)})))},i.targets=[],n=i;function i(){var e=null!==o&&o.apply(this,arguments)||this;return e.popoverSelectorAttribute="aria-controls",e}function s(t){var n,r=(null===(n=t.getAttribute("data-controller"))||void 0===n?void 0:n.includes("s-popover"))||!1,o=e.application.getControllerForElementAndIdentifier(t,"s-popover");t=(n=(n=t.getAttribute("data-s-popover-reference-selector"))?t.querySelector(n):t)?n.getAttribute("aria-controls"):null;return{isPopover:r,controller:o,referenceElement:n,popover:t?document.getElementById(t):null}}function a(e,t,n){var r=new Set(null===(r=e.getAttribute("data-controller"))||void 0===r?void 0:r.split(/\s+/));n?r.add(t):r.delete(t),e.setAttribute("data-controller",Array.from(r).join(" "))}e.PopoverController=n,e.showPopover=function(e){var t=s(e),n=t.isPopover;if(t=t.controller)t.show();else{if(!n)throw'element does not have data-controller="s-popover"';e.setAttribute("data-s-popover-auto-show","true")}},e.hidePopover=function(e){var t=(r=s(e)).isPopover,n=r.controller,r=r.popover;if(n)n.hide();else{if(!t)throw'element does not have data-controller="s-popover"';e.removeAttribute("data-s-popover-auto-show"),r&&r.classList.remove("is-visible")}},e.attachPopover=function(e,t,n){var r=s(e),o=r.referenceElement;if(r=r.popover)throw'element already has popover with id="'.concat(r.id,'"');if(!o)throw"element has invalid data-s-popover-reference-selector attribute";if("string"==typeof t){var i=document.createRange().createContextualFragment(t).children;if(1!==i.length)throw"popover should contain a single element";t=i[0]}if(r=o.getAttribute("aria-controls"),i=t.id,!t.classList.contains("s-popover"))throw'popover should have the "s-popover" class but had class="'.concat(t.className,'"');if(r&&r!==i)throw'element has aria-controls="'.concat(r,'" but popover has id="').concat(i,'"');i||(i="--stacks-s-popover-"+Math.random().toString(36).substring(2,10),t.id=i),r||o.setAttribute("aria-controls",i),!t.parentElement&&e.parentElement&&o.insertAdjacentElement("afterend",t),a(e,"s-popover",!0),n&&(n.toggleOnClick&&o.setAttribute("data-action","click->s-popover#toggle"),n.placement&&e.setAttribute("data-s-popover-placement",n.placement),n.autoShow&&e.setAttribute("data-s-popover-auto-show","true"))},e.detachPopover=function(e){var t=(o=s(e)).isPopover,n=o.controller,r=o.referenceElement,o=o.popover;return null!=n&&n.hide(),null!=o&&o.remove(),t&&(a(e,"s-popover",!1),r&&r.removeAttribute("aria-controls")),o}}(Stacks=Stacks||{}),Stacks.application.register("s-popover",Stacks.PopoverController),__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),function(){var e,t;function n(){return null!==t&&t.apply(this,arguments)||this}function r(e,t){for(var n=[],r=e.children[0],o=[],i=[];r||i.some((function(e){return 0!==e}));){var s=[];n.push(s);var a=0;if(r)for(var c=0;c<r.children.length;c++){for(;i[a];)i[a]--,s[a]=o[a],a++;var l=r.children[c];if(!(l instanceof HTMLTableCellElement))throw"invalid table";if("none"!==getComputedStyle(l).display){if(l===t)return a;for(var u=a+l.colSpan;a<u;a++)i[a]=l.rowSpan-1,o[a]=l,s[a]=l}}for(;a<o.length;)i[a]&&(i[a]--,s[a]=o[a]),a++;r=r&&r.nextElementSibling}return t?-1:n}Stacks.application.register("s-table",(t=Stacks.StacksController,__extends(n,t),n.prototype.setCurrentSort=function(e,t){if(["asc","desc","none"].indexOf(t)<0)throw"direction must be one of asc, desc, or none";var n=this;this.columnTargets.forEach((function(r){var o=r===e;r.classList.toggle("is-sorted",o&&"none"!==t),r.querySelectorAll(".js-sorting-indicator").forEach((function(e){e.classList.toggle("d-none",!e.classList.contains("js-sorting-indicator-"+(o?t:"none")))})),o&&"none"!==t?n.setElementData(r,"sort-direction",t):n.removeElementData(r,"sort-direction")}))},n.prototype.sort=function(e){var t=this,n=e.currentTarget;if(!(n instanceof HTMLTableCellElement))throw"invalid event target";var o,i,s,a,c,l,u=(e=this.element).tBodies[0],p=function(e){if(!(e.parentElement&&e.parentElement.parentElement instanceof HTMLTableSectionElement))throw"invalid table";if("number"==typeof(e=r(e.parentElement.parentElement,e)))return e;throw"shouldn't happen"}(n);p<0||(o=function(e){if((e=r(e))instanceof Array)return e;throw"shouldn't happen"}(u),i="asc"===this.getElementData(n,"sort-direction")?-1:1,s=Array.from(e.tBodies[0].rows),a=!1,c=[],s.forEach((function(e,n){var r,i=t.getElementData(e,"sort-to");"top"!==i&&("bottom"!==i?(r=o[n][p])?(""!==(r="string"==typeof(i=t.getElementData(r,"sort-val"))?i:r.textContent.trim())&&parseInt(r,10)+""!==r&&(a=!0),c.push([r,n])):c.push(["",n]):l=l||e)})),a||c.forEach((function(e){e[0]=""===e[0]?Number.MIN_VALUE:parseInt(e[0],10)})),c.sort((function(e,t){return e[0]>t[0]?i:e[0]<t[0]?-1*i:e[1]>t[1]?1:-1})),c.forEach((function(e){(e=s[e[1]]).parentElement.removeChild(e),l?u.insertBefore(e,l):u.appendChild(e)})),this.setCurrentSort(n,1==i?"asc":"desc"))},(e=n).targets=["column"],e))}(),__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),function(e){var t,n=(t=e.BasePopoverController,__extends(r,t),r.prototype.connect=function(){t.prototype.connect.call(this),window.matchMedia("(hover: hover)").matches&&this.bindMouseEvents()},r.prototype.disconnect=function(){this.unbindMouseEvents(),t.prototype.disconnect.call(this)},r.prototype.show=function(n){void 0===n&&(n=null);var r=e.application.getControllerForElementAndIdentifier(this.element,"s-popover");r&&r.isVisible||t.prototype.show.call(this,n)},r.prototype.scheduleShow=function(e){var t=this;void 0===e&&(e=null),window.clearTimeout(this.activeTimeout),this.activeTimeout=window.setTimeout((function(){return t.show(e)}),300)},r.prototype.hide=function(e){void 0===e&&(e=null),window.clearTimeout(this.activeTimeout),this.activeTimeout=null,t.prototype.hide.call(this,e)},r.prototype.applyTitleAttributes=function(){var e,t=this.data.get("html-title");if(t)e=document.createRange().createContextualFragment(t);else{var n=this.element.getAttribute("title");if(!n)return null;e=document.createTextNode(n)}this.data.delete("html-title"),this.element.removeAttribute("title"),(t=this.element.getAttribute("aria-describedby"))||(t=r.generateId(),this.element.setAttribute("aria-describedby",t)),(n=document.getElementById(t))||((n=document.createElement("div")).id=t,n.className="s-popover s-popover__tooltip pe-none",n.setAttribute("aria-hidden","true"),n.setAttribute("role","tooltip"),(o=this.element.parentNode)?o.insertBefore(n,this.element.nextSibling):document.body.appendChild(n));var o=n.querySelector(".s-popover--arrow");return n.innerHTML="",n.appendChild(e),o?n.appendChild(o):n.insertAdjacentHTML("beforeend",'<div class="s-popover--arrow"></div>'),this.scheduleUpdate(),n},r.prototype.bindDocumentEvents=function(){this.boundHideIfWithin=this.boundHideIfWithin||this.hideIfWithin.bind(this),document.addEventListener("s-popover:shown",this.boundHideIfWithin)},r.prototype.unbindDocumentEvents=function(){document.removeEventListener("s-popover:shown",this.boundHideIfWithin)},r.prototype.generatePopover=function(){return this.applyTitleAttributes()},r.prototype.hideIfWithin=function(e){e.target.contains(this.referenceElement)&&this.hide()},r.prototype.bindMouseEvents=function(){this.boundScheduleShow=this.boundScheduleShow||this.scheduleShow.bind(this),this.boundHide=this.boundHide||this.hide.bind(this),this.referenceElement.addEventListener("mouseover",this.boundScheduleShow),this.referenceElement.addEventListener("mouseout",this.boundHide),this.referenceElement.addEventListener("focus",this.boundScheduleShow),this.referenceElement.addEventListener("blur",this.boundHide)},r.prototype.unbindMouseEvents=function(){this.referenceElement.removeEventListener("mouseover",this.boundScheduleShow),this.referenceElement.removeEventListener("mouseout",this.boundHide),this.referenceElement.removeEventListener("focus",this.boundScheduleShow),this.referenceElement.removeEventListener("blur",this.boundHide)},r.generateId=function(){return"--stacks-s-tooltip-"+Math.random().toString(36).substring(2,10)},r.targets=[],r);function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.popoverSelectorAttribute="aria-describedby",e}function o(t,n){n&&n.placement&&t.setAttribute("data-s-tooltip-placement",n.placement),(n=e.application.getControllerForElementAndIdentifier(t,"s-tooltip"))?n.applyTitleAttributes():t.setAttribute("data-controller",t.getAttribute("data-controller")+" s-tooltip")}e.TooltipController=n,e.setTooltipHtml=function(e,t,n){e.setAttribute("data-s-tooltip-html-title",t),e.removeAttribute("title"),o(e,n)},e.setTooltipText=function(e,t,n){e.setAttribute("title",t),e.removeAttribute("data-s-tooltip-html-title"),o(e,n)}}(Stacks=Stacks||{}),Stacks.application.register("s-tooltip",Stacks.TooltipController);var Stacks;__extends=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){var t,n=(t=e.StacksController,__extends(r,t),r.prototype.connect=function(){t.prototype.connect.call(this),this.boundDragEnter=this.handleUploaderActive.bind(this,!0),this.boundDragLeave=this.handleUploaderActive.bind(this,!1),this.inputTarget.addEventListener("dragenter",this.boundDragEnter),this.inputTarget.addEventListener("dragleave",this.boundDragLeave)},r.prototype.disconnect=function(){this.inputTarget.removeEventListener("dragenter",this.boundDragEnter),this.inputTarget.removeEventListener("dragleave",this.boundDragLeave),t.prototype.disconnect.call(this)},r.prototype.handleInput=function(){var e,t=this;this.previewsTarget.innerHTML="",this.inputTarget.files&&(e=this.inputTarget.files.length,this.getDataURLs(this.inputTarget.files,r.FILE_DISPLAY_LIMIT).then((function(n){var r;t.handleVisible(!0),1<n.length?((r=document.createElement("div")).classList.add("s-uploader--previews-heading"),r.innerText=n.length<e?"Showing ".concat(n.length," of ").concat(e," files"):"".concat(e," items"),t.previewsTarget.appendChild(r),t.previewsTarget.classList.add("has-multiple")):t.previewsTarget.classList.remove("has-multiple"),n.forEach((function(e){return t.addFilePreview(e)})),t.handleUploaderActive(!0)})))},r.prototype.reset=function(){this.inputTarget.value="",this.previewsTarget.innerHTML="",this.handleVisible(!1)},r.prototype.handleVisible=function(e){var t=(r=this.targets.scope).findAllElements("[data-s-uploader-hide-on-input]"),n=r.findAllElements("[data-s-uploader-show-on-input]"),r=r.findAllElements("[data-s-uploader-enable-on-input]");e?(t.map((function(e){return e.classList.add("d-none")})),n.map((function(e){return e.classList.remove("d-none")})),r.map((function(e){return e.removeAttribute("disabled")}))):(t.map((function(e){return e.classList.remove("d-none")})),n.map((function(e){return e.classList.add("d-none")})),r.map((function(e){return e.setAttribute("disabled","true")})),this.handleUploaderActive(!1))},r.prototype.addFilePreview=function(e){var t,n;e&&(t=document.createElement("div"),e.type.match("image/*")&&e.data?((n=document.createElement("img")).src=e.data.toString(),n.alt=e.name):(n=document.createElement("div")).innerText=e.name,n.classList.add("s-uploader--preview-thumbnail"),t.appendChild(n),t.classList.add("s-uploader--preview"),t.setAttribute("data-filename",e.name),this.previewsTarget.appendChild(t))},r.prototype.handleUploaderActive=function(e){this.uploaderTarget.classList.toggle("is-active",e)},r.prototype.fileToDataURL=function(e){var t=new FileReader,n=e.name,o=e.size,i=e.type;return o<r.MAX_FILE_SIZE&&-1<i.indexOf("image")?new Promise((function(r,o){t.onload=function(e){(e=null===(e=null==e?void 0:e.target)||void 0===e?void 0:e.result)?r({data:e,name:n,type:i}):o()},t.readAsDataURL(e)})):Promise.resolve({name:n,type:i})},r.prototype.getDataURLs=function(e,t){var n=this;e=Array.from(e).slice(0,Math.min(t,e.length)).map((function(e){return n.fileToDataURL(e)}));return Promise.all(e)},r.targets=["input","previews","uploader"],r.FILE_DISPLAY_LIMIT=10,r.MAX_FILE_SIZE=10485760,r);function r(){return null!==t&&t.apply(this,arguments)||this}e.UploaderController=n}(Stacks=Stacks||{}),Stacks.application.register("s-uploader",Stacks.UploaderController),Stacks._initializing=!1;